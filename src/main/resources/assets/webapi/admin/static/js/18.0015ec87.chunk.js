webpackJsonp([18],{1009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(90),r=(n.n(o),n(0)),i=(n.n(r),n(69)),a=n(70),s=n(59),c=n(1021),p=n(240),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={modal:!1},n.onTabChange=n.onTabChange.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){this.props.requestCollections()},t.prototype.onTabChange=function(e,t){if(t.activeIndex||0===t.activeIndex){var n=this.props.collections[t.activeIndex];this.props.requestSubjects(n)}},t.prototype.showSubject=function(e){this.setState({modal:!0,subject:e})},t.prototype.toggleModal=function(){this.setState({modal:!this.state.modal})},t.prototype.render=function(){var e=this,t=this.props.t,n=this.state,a=n.modal,p=n.subject;return r.createElement(s.t,{basic:!0},r.createElement(s.v,{defaultActiveIndex:-1,onTabChange:this.onTabChange,menu:{secondary:!0,pointing:!0},panes:this.props.collections.map(function(n){return{menuItem:r.createElement(s.n.Item,{key:n.id},o.upperFirst(n.id),r.createElement(s.k,null,n.loadedSubjectCount)),render:function(){return r.createElement(s.t,{basic:!0},r.createElement(c.a,{list:e.props.subjects,idFunc:function(e){return e.id},isEditing:function(e){return!1},fields:{id:{name:"id",label:t("Id"),view:!0},friendlyId:{name:"friendlyId",label:t("Name"),view:!0},permissions:{name:"permissions",label:t("Permissions"),view:function(n){return n.permissions&&Object.keys(n.permissions).length?r.createElement(s.b,{primary:!0,content:"View",onClick:function(){return e.showSubject(n)}}):t("No permissions")}}}}))}}})}),p&&p.permissions&&r.createElement(s.p,{open:a,onClose:function(){return e.toggleModal()}},r.createElement(s.p.Header,null,r.createElement(i.a,{i18nKey:"GameRulesTitle"},"Permissions for '",p.id,"'")),r.createElement(s.p.Content,null,r.createElement(s.w,{basic:!0,compact:!0},r.createElement(s.w.Body,null,Object.keys(p.permissions).map(function(e){return r.createElement(s.w.Row,{key:e},r.createElement(s.w.Cell,null,e),r.createElement(s.w.Cell,null,r.createElement(s.h,{color:p.permissions[e]?"green":"red",name:p.permissions[e]?"check":"delete"})))})))),r.createElement(s.p.Actions,null,r.createElement(s.b,{color:"blue",onClick:function(){return e.toggleModal()}},t("OK")))))},t}(r.Component),d=function(e){return{collections:e.permission.collections,subjects:e.permission.subjects}},h=function(e){return{requestCollections:function(){return e(Object(p.b)())},requestSubjects:function(t){return e(Object(p.c)(t))}}};t.default=Object(a.b)(d,h)(Object(i.c)("Permissions")(u))},1021:function(e,t,n){"use strict";var o=n(90),r=(n.n(o),n(0)),i=(n.n(r),n(69)),a=n(59),s=n(89),c=n(1022),p=n(1023),l=n(1024),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={page:0,newData:{}},n.changePage=n.changePage.bind(n),n.doHandleChange=n.doHandleChange.bind(n),n.handleChange=s.e.bind(n,n.doHandleChange),n}return u(t,e),t.prototype.doHandleChange=function(e,t){this.setState({newData:d({},this.state.newData,(n={},n[e]=t,n))});var n},t.prototype.changePage=function(e,t){e.preventDefault(),this.setState({page:t})},t.prototype.onEdit=function(e,t){var n=this,r={};e&&Object.keys(this.props.fields).forEach(function(t){n.props.fields[t].edit&&(r[t]=o.get(e,t))}),console.log(r),this.setState({newData:r}),this.props.onEdit&&this.props.onEdit(e,t)},t.prototype.shouldComponentUpdate=function(e,t){return e.fields!==this.props.fields||e.list!==this.props.list||t.page!==this.state.page||t.newData!==this.state.newData},t.prototype.render=function(){var e=this,t=this.props,n=t.icon,o=t.title,i=t.list,s=t.canEdit,u=t.canDelete,h=t.actions,f=Object.keys(this.props.fields).map(function(t){return e.props.fields[t]}).filter(function(e){return e.view}),m=Math.ceil(i.length/20),g=Math.min(this.state.page,m-1),y=i.slice(20*g,20*(g+1)),b={handleChange:this.handleChange,state:this.state.newData,setState:function(t){return e.setState({newData:d({},e.state.newData,t)})}},E=this.props.t;return r.createElement("div",{style:{marginTop:"2em"}},o&&r.createElement(a.g,null,r.createElement(a.h,{fitted:!0,name:n})," ",o),r.createElement(a.w,{striped:!0,stackable:!0},r.createElement(p.a,{fields:f,hasActions:"undefined"!==typeof h,canEdit:s,canDelete:u,t:E}),r.createElement(a.w.Body,null,y.map(function(t,n){return r.createElement(l.a,{key:e.props.idFunc(t),obj:t,tableRef:b,canEdit:s,canDelete:u,editing:e.props.isEditing(t),fields:f,onEdit:function(t,n){return e.onEdit(t,n)},onSave:e.props.onSave,onDelete:e.props.onDelete,actions:e.props.actions,newData:e.state.newData,handleChange:e.handleChange,t:E})}))),r.createElement(c.a,{page:g,maxPage:m,changePage:function(t,n){return e.changePage(t,n)}}))},t}(r.Component);t.a=Object(i.c)("DataTable")(h)},1022:function(e,t,n){"use strict";var o=n(0),r=(n.n(o),n(59)),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.page!==this.props.page||e.maxPage!==this.props.maxPage},t.prototype.render=function(){var e=this;if(this.props.maxPage<=1)return null;for(var t=this.props,n=t.page,i=t.maxPage,a=Math.max(0,n-4),s=Math.min(i,n+5),c=[],p=a;p<s;p++)c.push(p);return o.createElement(r.n,{pagination:!0},n>4?o.createElement(r.n.Item,{onClick:function(t){return e.props.changePage(t,0)}},"1"):null,n>5?o.createElement(r.n.Item,{onClick:function(t){return e.props.changePage(t,n-5)}},"..."):null,c.map(function(t){return o.createElement(r.n.Item,{key:t,onClick:function(n){return e.props.changePage(n,t)},active:t===n},t+1)}),n<i-6?o.createElement(r.n.Item,{onClick:function(t){return e.props.changePage(t,n+5)}},"..."):null,n<i-5?o.createElement(r.n.Item,{onClick:function(t){return e.props.changePage(t,i-1)}},i):null)},t}(o.Component);t.a=a},1023:function(e,t,n){"use strict";var o=n(0),r=(n.n(o),n(59)),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.fields!==this.props.fields},t.prototype.render=function(){var e=this;return o.createElement(r.w.Header,null,o.createElement(r.w.Row,null,Object.keys(this.props.fields).map(function(t){var n=e.props.fields[t];return o.createElement(r.w.HeaderCell,{key:t},n.label?n.label:"<"+n.name+">")}),this.props.hasActions||this.props.canEdit||this.props.canDelete?o.createElement(r.w.HeaderCell,null,this.props.t("Actions")):null))},t}(o.Component);t.a=a},1024:function(e,t,n){"use strict";var o=n(0),r=(n.n(o),n(59)),i=n(89),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.obj!==this.props.obj||e.editing!==this.props.editing||e.fields!==this.props.fields||this.props.editing&&e.newData!==this.props.newData},t.prototype.renderEdit=function(e,t){return t.options?o.createElement(r.e.Field,{fluid:!0,selection:!0,search:!0,control:r.d,name:t.name,placeholder:t.label,options:t.options,value:this.props.newData[t.name],onChange:this.props.handleChange}):o.createElement(r.e.Input,{name:t.name,type:t.type?t.type:"text",placeholder:t.label,value:this.props.newData[t.name],onChange:this.props.handleChange})},t.prototype.render=function(){var e=this,t=this.props,n=t.actions,a=t.fields,s=t.obj,c=t.canEdit,p=t.canDelete,l=t.editing,u=t.tableRef;return o.createElement(r.w.Row,null,a.map(function(t,n){return o.createElement(r.w.Cell,{key:n,collapsing:!t.wide},t.edit&&l?"function"===typeof t.edit?t.edit(s,u):e.renderEdit(s,t):"function"===typeof t.view?t.view(s,u):Object(i.d)(s,t.name))}),n||c||p?o.createElement(r.w.Cell,{collapsing:!0},c&&l?[o.createElement(r.b,{key:"save",color:"green",disabled:s.updating,loading:s.updating,onClick:function(){e.props.onSave&&e.props.onSave(s,e.props.newData,u)}},o.createElement(r.h,{name:"save"})," ",this.props.t("Save")),o.createElement(r.b,{key:"cancel",color:"yellow",disabled:s.updating,loading:s.updating,onClick:function(){return e.props.onEdit(null,u)}},o.createElement(r.h,{name:"cancel"})," ",this.props.t("Cancel"))]:c?o.createElement(r.b,{color:"blue",disabled:s.updating,loading:s.updating,onClick:function(){return e.props.onEdit(s,u)}},o.createElement(r.h,{name:"edit"})," ",this.props.t("Edit")):null,p&&o.createElement(r.b,{color:"red",disabled:s.updating,loading:s.updating,onClick:function(){e.props.onDelete&&e.props.onDelete(s,u)}},o.createElement(r.h,{name:"trash"})," ",this.props.t("Remove")),n&&n(s,u)):null)},t}(o.Component);t.a=s}});
//# sourceMappingURL=18.0015ec87.chunk.js.map