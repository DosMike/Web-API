{"version":3,"sources":["views/Entities/index.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_8__components_DataView__","Entities","_super","__extends","prototype","componentDidMount","this","props","requestWorlds","requestCatalog","__WEBPACK_IMPORTED_MODULE_7__types__","Entity","render","_t","t","__WEBPACK_IMPORTED_MODULE_0_react__","canDelete","icon","title","filterTitle","createTitle","fields","type.name","label","create","createName","filter","filterName","view","entity","type","name","options","__WEBPACK_IMPORTED_MODULE_6__components_Util__","entTypes","world","worlds","required","position","isGroup","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","color","location","x","toFixed","y","z","Group","inline","Input","width","placeholder","value","state","onChange","handleChange","health","wide","progress","percent","current","max","info","aiEnabled","age","Detail","adult","breedable","career","flying","glowing","silent","sneaking","sprinting","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","list","api","types","dispatch","__WEBPACK_IMPORTED_MODULE_5__actions_dataview__","__WEBPACK_IMPORTED_MODULE_4__actions__","__WEBPACK_IMPORTED_MODULE_1_react_i18next__","DataTable","_this","call","page","newData","changePage","bind","doHandleChange","__WEBPACK_IMPORTED_MODULE_4__Util__","key","setState","__assign","_a","event","preventDefault","onEdit","obj","keys","forEach","edit","__WEBPACK_IMPORTED_MODULE_0_lodash__","console","log","shouldComponentUpdate","nextProps","nextState","canEdit","actions","map","f","maxPage","Math","ceil","length","min","listPage","slice","thisRef","changes","__WEBPACK_IMPORTED_MODULE_1_react__","style","marginTop","fitted","striped","stackable","__WEBPACK_IMPORTED_MODULE_6__TableHeader__","hasActions","Body","i","__WEBPACK_IMPORTED_MODULE_7__TableRow__","idFunc","tableRef","editing","isEditing","d","v","onSave","onDelete","__WEBPACK_IMPORTED_MODULE_5__Pagination__","e","p","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","Pagination","from","to","pages","push","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","Item","onClick","active","DataTableHeader","Header","Row","field","HeaderCell","TableRow","renderEdit","col","Field","fluid","selection","search","control","j","Cell","collapsing","__WEBPACK_IMPORTED_MODULE_2__Util__","disabled","updating","loading","endpoint","objId","noDetails","id","data","_state","ownProps","replace","creating","perm","split","perms","permissions","mapStateToProps","requestList","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","details","endEdit","save","delete","createTable","__WEBPACK_IMPORTED_MODULE_6__DataTable__","static","interval","setInterval","componentWillUnmount","clearInterval","checks","regsValid","expandRef","val","func_1","createFields","filterFields","ff","find","dataVal","filterValue","indexOf","RegExp","test","every","check","cols","origActions","DT","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_8__Util__","concat","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","createButton","onCreate","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","newObj","CreateForm","canCreate","fieldGroups","newField","only","second","first","fg","renderField","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","content","multiple"],"mappings":"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","file":"static/js/17.752d3427.chunk.js","sourcesContent":["import * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { connect, Dispatch } from \"react-redux\"\nimport { Button, Form, Icon, Label, Progress } from \"semantic-ui-react\"\n\nimport { AppAction, CatalogRequestAction, requestCatalog } from \"../../actions\"\nimport { ListRequestAction, requestList } from \"../../actions/dataview\"\nimport { formatRange, renderCatalogTypeOptions, renderWorldOptions } from \"../../components/Util\"\nimport { CatalogType, Entity, WorldFull } from \"../../fetch\"\nimport { AppState, CatalogTypeKeys } from \"../../types\"\n\nimport DataViewFunc from \"../../components/DataView\"\nconst DataView = DataViewFunc(\"entity\", \"uuid\")\n\ninterface Props extends reactI18Next.InjectedTranslateProps {\n\tworlds: WorldFull[],\n\tentTypes: CatalogType[],\n\trequestWorlds: () => ListRequestAction,\n\trequestCatalog: (type: string) => CatalogRequestAction,\n}\n\nclass Entities extends React.Component<Props> {\n\n\tcomponentDidMount() {\n\t\tthis.props.requestWorlds()\n\t\tthis.props.requestCatalog(CatalogTypeKeys.Entity)\n\t}\n\n\trender() {\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<DataView\n\t\t\t\tcanDelete\n\t\t\t\ticon=\"paw\"\n\t\t\t\ttitle={_t(\"Entities\")}\n\t\t\t\tfilterTitle={_t(\"FilterEntities\")}\n\t\t\t\tcreateTitle={_t(\"SpawnEntity\")}\n\t\t\t\tfields={{\n\t\t\t\t\t\"type.name\": {\n\t\t\t\t\t\tlabel: _t(\"Type\"),\n\t\t\t\t\t\tcreate: true,\n\t\t\t\t\t\tcreateName: \"type\",\n\t\t\t\t\t\tfilter: true,\n\t\t\t\t\t\tfilterName: \"type.id\",\n\t\t\t\t\t\tview: (entity: Entity) => entity.type.name,\n\t\t\t\t\t\toptions: renderCatalogTypeOptions(this.props.entTypes),\n\t\t\t\t\t},\n\t\t\t\t\tworld: {\n\t\t\t\t\t\tlabel: _t(\"World\"),\n\t\t\t\t\t\tview: false,\n\t\t\t\t\t\tcreate: true,\n\t\t\t\t\t\tfilter: true,\n\t\t\t\t\t\tfilterName: \"location.world.uuid\",\n\t\t\t\t\t\toptions: renderWorldOptions(this.props.worlds),\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tlabel: _t(\"Location\"),\n\t\t\t\t\t\tisGroup: true,\n\t\t\t\t\t\tview: (entity: Entity) =>\n\t\t\t\t\t\t\t<Button color=\"blue\">\n\t\t\t\t\t\t\t\t<Icon name=\"globe\" />\n\t\t\t\t\t\t\t\t{entity.location.world.name}&nbsp; &nbsp;\n\t\t\t\t\t\t\t\t{entity.location.position.x.toFixed(0)} |&nbsp;\n\t\t\t\t\t\t\t\t{entity.location.position.y.toFixed(0)} |&nbsp;\n\t\t\t\t\t\t\t\t{entity.location.position.z.toFixed(0)}\n\t\t\t\t\t\t\t</Button>,\n\t\t\t\t\t\tcreate: (view) =>\n\t\t\t\t\t\t\t<Form.Group inline>\n\t\t\t\t\t\t\t\t<label>{_t(\"Position\")}</label>\n\t\t\t\t\t\t\t\t<Form.Input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\twidth={6}\n\t\t\t\t\t\t\t\t\tname=\"position.x\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"X\"\n\t\t\t\t\t\t\t\t\tvalue={view.state[\"position.x\"]}\n\t\t\t\t\t\t\t\t\tonChange={view.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Form.Input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\twidth={6}\n\t\t\t\t\t\t\t\t\tname=\"position.y\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Y\"\n\t\t\t\t\t\t\t\t\tvalue={view.state[\"position.y\"]}\n\t\t\t\t\t\t\t\t\tonChange={view.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Form.Input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\twidth={6}\n\t\t\t\t\t\t\t\t\tname=\"position.z\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Z\"\n\t\t\t\t\t\t\t\t\tvalue={view.state[\"position.z\"]}\n\t\t\t\t\t\t\t\t\tonChange={view.handleChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Form.Group>,\n\t\t\t\t\t},\n\t\t\t\t\thealth: {\n\t\t\t\t\t\tlabel: _t(\"Health\"),\n\t\t\t\t\t\twide: true,\n\t\t\t\t\t\tview: (entity: Entity) => {\n\t\t\t\t\t\t\tif (!entity.health) {\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn <Progress\n\t\t\t\t\t\t\t\tprogress\n\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\tpercent={formatRange(entity.health.current, entity.health.max)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tinfo: {\n\t\t\t\t\t\tlabel: _t(\"Info\"),\n\t\t\t\t\t\twide: true,\n\t\t\t\t\t\tview: (entity: Entity) =>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{entity.aiEnabled &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"AI\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.age &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Age\")}\n\t\t\t\t\t\t\t\t\t\t<Label.Detail>\n\t\t\t\t\t\t\t\t\t\t\t{entity.age.adult ? _t(\"Adult\") : entity.age.age}\n\t\t\t\t\t\t\t\t\t\t</Label.Detail>\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.breedable &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Breedable\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.career &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Career\")}\n\t\t\t\t\t\t\t\t\t\t<Label.Detail>{entity.career.name}</Label.Detail>\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.flying &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Flying\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.glowing &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Glowing\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.silent &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Silent\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.sneaking &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Sneaking\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t{entity.sprinting &&\n\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t{_t(\"Sprinting\")}\n\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state: AppState) => {\n\treturn {\n\t\tworlds: state.world.list,\n\t\tentTypes: state.api.types[CatalogTypeKeys.Entity],\n\t}\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\n\treturn {\n\t\trequestWorlds: () => dispatch(requestList(\"world\", true)),\n\t\trequestCatalog: (type: string) => dispatch(requestCatalog(type)),\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(translate(\"Entities\")(Entities))\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Entities/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Header, Icon, SemanticICONS, Table } from \"semantic-ui-react\"\n\nimport { DataFieldRaw, DataTableRef, IdFunction } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nimport Pagination from \"./Pagination\"\nimport TableHeader from \"./TableHeader\"\nimport TableRow from \"./TableRow\"\n\nconst ITEMS_PER_PAGE = 20\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle?: string\n\ticon?: SemanticICONS\n\tlist: T[]\n\tcanEdit?: boolean\n\tcanDelete?: boolean\n\tfields: {\n\t\t[key: string]: DataFieldRaw<T>\n\t}\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\n\tonEdit?: (data: T | null, view: DataTableRef) => void\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\n\tonDelete?: (data: T, view: DataTableRef) => void\n\tidFunc: IdFunction<T>\n\tisEditing: (data: T) => boolean\n}\n\ninterface OwnState {\n\tpage: number\n\tnewData: any\n}\n\nclass DataTable<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.changePage = this.changePage.bind(this)\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tchangePage(event: React.MouseEvent<HTMLElement>, page: number) {\n\t\tevent.preventDefault()\n\n\t\tthis.setState({\n\t\t\tpage: page,\n\t\t})\n\t}\n\n\tonEdit(obj: T | null, view: DataTableRef): void {\n\t\tconst newData = {}\n\t\tif (obj) {\n\t\t\tObject.keys(this.props.fields).forEach(name => {\n\t\t\t\tif (!this.props.fields[name].edit) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tnewData[name] = _.get(obj, name)\n\t\t\t})\n\t\t}\n\n\t\tconsole.log(newData)\n\t\tthis.setState({\n\t\t\tnewData: newData,\n\t\t})\n\n\t\tif (this.props.onEdit) {\n\t\t\tthis.props.onEdit(obj, view)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.page !== this.state.page ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\trender() {\n\t\tconst { icon, title, list, canEdit, canDelete, actions } = this.props\n\t\tconst fields = Object.keys(this.props.fields).map(f => this.props.fields[f]).filter(f => f.view)\n\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE)\n\t\tconst page = Math.min(this.state.page, maxPage - 1)\n\n\t\tconst listPage = list.slice(page * ITEMS_PER_PAGE, (page + 1) * ITEMS_PER_PAGE)\n\n\t\tconst thisRef: DataTableRef = {\n\t\t\thandleChange: this.handleChange,\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: (changes: object) => this.setState({\n\t\t\t\tnewData: { ...this.state.newData, ...changes }\n\t\t\t}),\n\t\t}\n\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<div style={{ marginTop: \"2em\" }}>\n\t\t\t\t{title &&\n\t\t\t\t\t<Header>\n\t\t\t\t\t\t<Icon fitted name={icon} /> {title}\n\t\t\t\t\t</Header>\n\t\t\t\t}\n\n\t\t\t\t<Table striped={true} stackable>\n\t\t\t\t\t<TableHeader\n\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\thasActions={typeof actions !== \"undefined\"}\n\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\tt={_t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t{listPage.map((obj, i) =>\n\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\tkey={this.props.idFunc(obj)}\n\t\t\t\t\t\t\t\tobj={obj}\n\t\t\t\t\t\t\t\ttableRef={thisRef}\n\t\t\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\t\t\tediting={this.props.isEditing(obj)}\n\t\t\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\t\t\tonEdit={(d: T, v) => this.onEdit(d, v)}\n\t\t\t\t\t\t\t\tonSave={this.props.onSave}\n\t\t\t\t\t\t\t\tonDelete={this.props.onDelete}\n\t\t\t\t\t\t\t\tactions={this.props.actions}\n\t\t\t\t\t\t\t\tnewData={this.state.newData}\n\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\tt={_t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Pagination\n\t\t\t\t\tpage={page}\n\t\t\t\t\tmaxPage={maxPage}\n\t\t\t\t\tchangePage={(e, p) => this.changePage(e, p)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default translate(\"DataTable\")(DataTable)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from \"react\"\r\nimport { Menu } from \"semantic-ui-react\"\r\n\r\nexport interface Props {\r\n\tpage: number\r\n\tmaxPage: number\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn nextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst { page, maxPage } = this.props\r\n\t\tconst from = Math.max(0, page - 4)\r\n\t\tconst to = Math.min(maxPage, page + 5)\r\n\t\tconst pages = []\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{ page > 4 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, 0)}>\r\n\t\t\t\t\t\t1\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page > 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page - 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ pages.map(p => (\r\n\t\t\t\t\t<Menu.Item key={p} onClick={e => this.props.changePage(e, p)} active={p === page}>\r\n\t\t\t\t\t\t{p + 1}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t))}\r\n\t\t\t\t{ page < maxPage - 6 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page + 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page < maxPage - 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, maxPage - 1)}>\r\n\t\t\t\t\t\t{maxPage}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t</Menu>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from \"react\"\r\nimport { Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw } from \"../../types\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\thasActions: boolean\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{Object.keys(this.props.fields).map(name => {\r\n\t\t\t\t\t\tconst field = this.props.fields[name]\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t\t\t\t{field.label ? field.label : \"<\" + field.name + \">\"}\r\n\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{this.props.hasActions || this.props.canEdit || this.props.canDelete ?\r\n\t\t\t\t\t\t<Table.HeaderCell>{this.props.t(\"Actions\")}</Table.HeaderCell>\r\n\t\t\t\t\t: null}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from \"react\"\r\nimport { Button, Dropdown, Form, Icon, Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw, DataTableRef } from \"../../types\"\r\nimport { get, HandleChangeFunc } from \"../Util\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\tobj: T\r\n\ttableRef: DataTableRef\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tediting: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n\tonEdit: (data: T | null, view: DataTableRef) => void\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\r\n\tonDelete?: (data: T, view: DataTableRef) => void\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\r\n\thandleChange: HandleChangeFunc\r\n\tnewData: any\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t}\r\n\r\n\trenderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : \"text\"}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { actions, fields, obj, canEdit, canDelete, editing, tableRef } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{fields.map((field, j) =>\r\n\t\t\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t\t\t{field.edit && editing ?\r\n\t\t\t\t\t\t\t(typeof field.edit === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.edit(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tthis.renderEdit(obj, field)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t(typeof field.view === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.view(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tget(obj, field.name)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t)}\r\n\t\t\t\t{actions || canEdit || canDelete ?\r\n\t\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t\t{canEdit && editing ?\r\n\t\t\t\t\t\t\t[<Button\r\n\t\t\t\t\t\t\t\tkey=\"save\"\r\n\t\t\t\t\t\t\t\tcolor=\"green\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onSave) { this.props.onSave(obj, this.props.newData, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t(\"Save\")}\r\n\t\t\t\t\t\t\t</Button>,\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey=\"cancel\"\r\n\t\t\t\t\t\t\t\tcolor=\"yellow\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(null, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t(\"Cancel\")}\r\n\t\t\t\t\t\t\t</Button>]\r\n\t\t\t\t\t\t: canEdit ?\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(obj, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t(\"Edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t\t\t{canDelete &&\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onDelete) { this.props.onDelete(obj, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t(\"Remove\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{actions && actions(obj, tableRef)}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t: null}\r\n\t\t\t</Table.Row>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { connect } from \"react-redux\"\nimport { Dispatch } from \"redux\"\nimport { Grid, Segment } from \"semantic-ui-react\"\n\nimport { AppAction } from \"../../actions\"\nimport {\n\trequestChange, requestCreate, requestDelete, requestDetails, requestList,\n\tsetFilter\n} from \"../../actions/dataview\"\nimport { DataViewState } from \"../../reducers/dataview\"\nimport { AppState, DataFieldRaw, DataTableRef, DataViewRef, IdFunction } from \"../../types\"\nimport CreateForm from \"../CreateForm\"\nimport DataTable, { Props as DataTableProps } from \"../DataTable\"\nimport FilterForm from \"../FilterForm\"\nimport { checkPermissions } from \"../Util\"\n\nimport { DispatchProps, FullProps, OwnProps, OwnState, StateProps } from \"./types\"\n\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\n\n\tinterval: NodeJS.Timer\n\n\tconstructor(props: FullProps<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tdata: null,\n\t\t}\n\n\t\tthis.details = this.details.bind(this)\n\t\tthis.create = this.create.bind(this)\n\t\tthis.edit = this.edit.bind(this)\n\t\tthis.endEdit = this.endEdit.bind(this)\n\t\tthis.save = this.save.bind(this)\n\t\tthis.delete = this.delete.bind(this)\n\t}\n\n\tcreateTable() { return DataTable as React.ComponentClass<DataTableProps<T>> }\n\n\tcomponentDidMount() {\n\t\tif (!this.props.static) {\n\t\t\tthis.props.requestList()\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000)\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.interval) {\n\t\t\tclearInterval(this.interval)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: FullProps<T>, nextState: OwnState<T>) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.filter !== this.props.filter ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.data !== this.state.data\n\t}\n\n\t// Create a new data entry\n\tcreate(data: T) {\n\t\tthis.props.requestCreate(data)\n\t}\n\n\t// Get the details for a data entry\n\tdetails(data: T) {\n\t\tthis.props.requestDetails(data)\n\t}\n\n\t// Select a data entry for editing\n\tedit(data: T | null) {\n\t\tthis.setState({\n\t\t\tdata: data,\n\t\t})\n\t}\n\n\t// Save/Update an existing data entry\n\tsave(data: T, newData: any) {\n\t\tthis.props.requestChange(data, newData)\n\t\tthis.endEdit()\n\t}\n\n\t// End editing an entry\n\tendEdit() {\n\t\tthis.setState({\n\t\t\tdata: null,\n\t\t})\n\t}\n\n\t// Delete a data entry\n\tdelete(data: T) {\n\t\tthis.props.requestDelete(data)\n\t}\n\n\trender() {\n\t\tconst checks: ((val: T) => boolean)[] = []\n\t\tlet regsValid = false\n\n\t\t// Reference that we pass to our various functions\n\t\tconst expandRef = (tableRef: DataTableRef): DataViewRef<T> =>\n\t\t\t({\n\t\t\t\t...tableRef,\n\t\t\t\tcreate: this.create,\n\t\t\t\tdetails: this.details,\n\t\t\t\tsave: this.save,\n\t\t\t\tedit: this.edit,\n\t\t\t\tendEdit: this.endEdit,\n\t\t\t\tdelete: this.delete,\n\t\t\t})\n\n\t\t// Get all the fields of the table\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(this.props.fields, (value, name) => {\n\t\t\tlet val: DataFieldRaw<T> = {\n\t\t\t\tname: name,\n\t\t\t\tview: true\n\t\t\t}\n\n\t\t\t// If the column is a string use that as the label\n\t\t\t// If the column is a function, use that function to display the cell\n\t\t\t// else if the column provides a view function then use that to display the cell\n\t\t\tif (typeof value === \"string\") {\n\t\t\t\tval.label = value\n\t\t\t} else if (typeof value === \"function\") {\n\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => value(obj, expandRef(tableRef))\n\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\tval = { ...val, ...value }\n\t\t\t\tif (typeof value.view === \"function\") {\n\t\t\t\t\tconst func = value.view\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => func(obj, expandRef(tableRef))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn val\n\t\t})\n\n\t\t// Get all the fields for the create form\n\t\t// Get all the fields for the filter form\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tObject.keys(fields).forEach(f => {\n\t\t\tif (fields[f].create) { createFields[f] = fields[f] }\n\t\t\tif (fields[f].filter) { filterFields[f] = fields[f] }\n\t\t})\n\n\t\ttry {\n\t\t\tObject.keys(this.props.filter).forEach(name => {\n\t\t\t\tconst value = this.props.filter[name]\n\n\t\t\t\t// Get the filter field according to the filterName if specified,\n\t\t\t\t// otherwise just the name\n\t\t\t\tconst ff = Object.keys(filterFields).map(f => filterFields[f]).find(f => f.filterName === name)\n\t\t\t\t\t|| filterFields[name]\n\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name)\n\t\t\t\tif (typeof ff.filterValue === \"function\") {\n\t\t\t\t\tval = ff.filterValue\n\t\t\t\t}\n\n\t\t\t\t// If it is an array then we need to check if the value is in the array\n\t\t\t\t// Otherwise just use a normal regex check\n\t\t\t\tif (_.isArray(value)) {\n\t\t\t\t\tif (value.length === 0) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tchecks.push((dataVal: T) => {\n\t\t\t\t\t\tconst v = val(dataVal)\n\t\t\t\t\t\treturn value.indexOf(v) >= 0\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tchecks.push((dataVal: T) => (new RegExp(value, \"i\")).test(val(dataVal)))\n\t\t\t\t}\n\t\t\t})\n\t\t\tregsValid = true\n\t\t} catch {\n\t\t\tregsValid = false\n\t\t}\n\n\t\t// Filter out the values according to the filters\n\t\t// If the regex isn't valid then we don't want to filter\n\t\tconst list = this.props.list.filter(data => {\n\t\t\treturn !regsValid || checks.every(check => check(data))\n\t\t})\n\n\t\t// Check how many columns we need for the create and filter form\n\t\tconst cols = this.props.createTitle && this.props.filterTitle ? 2 : 1\n\n\t\t// Wrap the provided actions if we have any\n\t\tconst origActions = this.props.actions\n\t\tlet actions = origActions\n\t\tif (typeof origActions === \"function\") {\n\t\t\tactions = (obj, tableRef) => origActions(obj, expandRef(tableRef))\n\t\t}\n\n\t\tconst DT = this.createTable()\n\n\t\treturn (\n\t\t\t<Segment basic>\n\n\t\t\t\t<Grid stackable doubling columns={cols}>\n\t\t\t\t\t{this.props.createTitle &&\n\t\t\t\t\t\tcheckPermissions(this.props.perms, this.props.perm.concat(\"create\")) &&\n\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<CreateForm\n\t\t\t\t\t\t\t\ttitle={this.props.createTitle}\n\t\t\t\t\t\t\t\tbutton={this.props.createButton}\n\t\t\t\t\t\t\t\tcreating={this.props.creating}\n\t\t\t\t\t\t\t\tfields={createFields}\n\t\t\t\t\t\t\t\tonCreate={(obj: any, tableRef: DataTableRef) =>\n\t\t\t\t\t\t\t\t\tthis.props.onCreate ?\n\t\t\t\t\t\t\t\t\t\tthis.props.onCreate(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tthis.create(obj)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\n\t\t\t\t\t{this.props.filterTitle &&\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<FilterForm\n\t\t\t\t\t\t\t\ttitle={this.props.filterTitle}\n\t\t\t\t\t\t\t\tfields={filterFields}\n\t\t\t\t\t\t\t\tvalid={regsValid}\n\t\t\t\t\t\t\t\tvalues={this.props.filter}\n\t\t\t\t\t\t\t\tonFilterChange={this.props.setFilter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\t\t\t\t</Grid>\n\n\t\t\t\t<DT\n\t\t\t\t\ttitle={this.props.title}\n\t\t\t\t\ticon={this.props.icon}\n\t\t\t\t\tlist={list}\n\t\t\t\t\tt={this.props.t}\n\t\t\t\t\tidFunc={this.props.idFunc}\n\t\t\t\t\tfields={fields}\n\t\t\t\t\tonEdit={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onEdit ?\n\t\t\t\t\t\t\tthis.props.onEdit(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.edit(obj)\n\t\t\t\t\t}\n\t\t\t\t\tonSave={(obj, newObj, tableRef) =>\n\t\t\t\t\t\tthis.props.onSave ?\n\t\t\t\t\t\t\tthis.props.onSave(obj, newObj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.save(obj, newObj)\n\t\t\t\t\t}\n\t\t\t\t\tonDelete={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onDelete ?\n\t\t\t\t\t\t\tthis.props.onDelete(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.delete(obj)\n\t\t\t\t\t}\n\t\t\t\t\tcanEdit={this.props.canEdit && checkPermissions(this.props.perms, this.props.perm.concat(\"change\"))}\n\t\t\t\t\tcanDelete={this.props.canDelete && checkPermissions(this.props.perms, this.props.perm.concat(\"delete\"))}\n\t\t\t\t\tactions={actions}\n\t\t\t\t\tisEditing={obj => this.props.equals(obj, this.state.data)}\n\t\t\t\t/>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\n\t\tconst state: DataViewState<T> = _.get(_state, endpoint.replace(/\\//g, \"_\").replace(\"-\", \"\"))\n\n\t\treturn {\n\t\t\tcreating: state ? state.creating : false,\n\t\t\tfilter: state && state.filter ? state.filter : {},\n\t\t\tlist: state ? state.list : [],\n\t\t\ttypes: _state.api.types,\n\t\t\tidFunc: id,\n\t\t\tperm: endpoint.split(\"/\"),\n\t\t\tperms: _state.api.permissions,\n\t\t}\n\t}\n}\n\nfunction mapDispatchToProps<T>(endpoint: string, id: IdFunction<T>, noDetails: boolean) {\n\treturn (dispatch: Dispatch<AppAction>) => {\n\t\treturn {\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\n\t\t\trequestChange: (data: T, newData: object) => dispatch(requestChange(endpoint, id, data, newData)),\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\n\t\t\tsetFilter: (filter: string, value: string) => dispatch(setFilter(endpoint, filter, value)),\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2),\n\t\t}\n\t}\n}\n\nexport default function createDataView<T>(endpoint: string, objId: string | IdFunction<T>, noDetails?: boolean) {\n\tif (!objId) {\n\t\tobjId = \"id\"\n\t}\n\tconst id = typeof objId === \"function\" ? objId : (data: T) => _.get(data, objId as string)\n\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\n\t\tmapStateToProps<T>(endpoint, id),\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\n\t)(DataView)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Button, Dropdown, Form, Header, Icon, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle: string\n\tcreating: boolean\n\tonCreate: (data: any, view: DataTableRef) => void\n\tbutton?: string\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n}\n\ninterface OwnState {\n\tnewData: any\n}\n\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t\tthis.create = this.create.bind(this)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\tcreate() {\n\t\tconst data = {}\n\t\tObject.keys(this.state.newData).forEach(key => {\n\t\t\t_.set(data, key, this.state.newData[key])\n\t\t})\n\n\t\tthis.props.onCreate(data, {\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: this.setState,\n\t\t\thandleChange: this.handleChange,\n\t\t})\n\t}\n\n\tcanCreate(): boolean {\n\t\treturn Object.keys(this.props.fields).every(name => {\n\t\t\tconst field = this.props.fields[name]\n\t\t\tconst key = field.createName ? field.createName : name\n\t\t\treturn typeof field === \"string\" || !field.required || this.state.newData[key]\n\t\t})\n\t}\n\n\trender() {\n\t\tconst { title, creating, fields } = this.props\n\n\t\tconst _t = this.props.t\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.createName ? field.createName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form loading={creating}>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn <div key={i}>\n\t\t\t\t\t\t\t\t{this.renderField(fg.only)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\n\t\t\t\t\t<Button color=\"green\" onClick={this.create} disabled={!this.canCreate()}>\n\t\t\t\t\t\t{this.props.button || _t(\"Create\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>) {\n\t\tconst state = this.state.newData\n\n\t\tif (typeof field.create === \"function\") {\n\t\t\treturn field.create({\n\t\t\t\tstate: state,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: state[field.name],\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid={true}\n\t\t\t\t\tselection={true}\n\t\t\t\t\tsearch={true}\n\t\t\t\t\trequired={field.required}\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tvalue={state[field.name]}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\trequired={field.required}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tname={field.name}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tvalue={state[field.name]}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default translate(\"CreateForm\")(CreateForm)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { Dropdown, Form, Header, Icon, Message, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> {\n\ttitle: string\n\tvalid: boolean\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n\tvalues: {\n\t\t[x: string]: string | string[]\n\t}\n\tonFilterChange: (key: string, value: string) => void\n}\n\nclass FilterForm<T> extends React.Component<Props<T>> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange)\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\n\t\treturn nextProps.values !== this.props.values ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.valid !== this.props.valid\n\t}\n\n\trender() {\n\t\tconst { title, fields, values, valid } = this.props\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.filterName ? field.filterName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first, _.get(values, fg.first.name), !valid)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second, _.get(values, fg.second.name), !valid)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\t\t\t\t\t<Message\n\t\t\t\t\t\terror\n\t\t\t\t\t\tvisible={!valid}\n\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\n\t\t\t\t\t/>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>, value: string | string[], error: boolean) {\n\t\tif (typeof field.filter === \"function\") {\n\t\t\treturn field.filter({\n\t\t\t\tstate: this.props.values,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: value,\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = []\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid\n\t\t\t\t\tselection\n\t\t\t\t\tsearch\n\t\t\t\t\tmultiple\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\terror={error}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\tname={field.name}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tvalue={value}\n\t\t\t\terror={error}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default FilterForm\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx"],"sourceRoot":""}