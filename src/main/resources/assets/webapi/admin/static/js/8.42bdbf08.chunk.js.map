{"version":3,"sources":["views/Integrations/WebBooks/Books.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx","../node_modules/copy-to-clipboard/index.js","../node_modules/toggle-selection/index.js"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_5__components_DataView__","Books","_super","props","_this","call","this","renderEditContent","bind","__extends","prototype","addLine","view","setState","lines","state","concat","newItem","moveLineUp","index","map","line","i","moveLineDown","deleteLine","filter","copy","book","__WEBPACK_IMPORTED_MODULE_0_copy_to_clipboard__","apiUrl","id","render","_t","t","__WEBPACK_IMPORTED_MODULE_1_react__","canEdit","canDelete","icon","title","filterTitle","createTitle","fields","label","create","required","edit","wide","content","dangerouslySetInnerHTML","__html","html","link","__WEBPACK_IMPORTED_MODULE_4_semantic_ui_react__","fluid","onFocus","e","target","select","action","color","onClick","value","onSave","obj","newData","save","size","Item","key","compact","floated","disabled","length","name","placeholder","onChange","handleChange","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","api","server","dispatch","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","DataTable","page","changePage","doHandleChange","__WEBPACK_IMPORTED_MODULE_4__Util__","__assign","_a","event","preventDefault","onEdit","keys","forEach","__WEBPACK_IMPORTED_MODULE_0_lodash__","console","log","shouldComponentUpdate","nextProps","nextState","list","actions","f","maxPage","Math","ceil","min","listPage","slice","thisRef","changes","style","marginTop","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","fitted","striped","stackable","__WEBPACK_IMPORTED_MODULE_6__TableHeader__","hasActions","Body","__WEBPACK_IMPORTED_MODULE_7__TableRow__","idFunc","tableRef","editing","isEditing","d","v","onDelete","__WEBPACK_IMPORTED_MODULE_5__Pagination__","p","Pagination","from","max","to","pages","push","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","active","DataTableHeader","Header","Row","field","HeaderCell","TableRow","renderEdit","col","options","Field","selection","search","control","Input","type","j","Cell","collapsing","__WEBPACK_IMPORTED_MODULE_2__Util__","updating","loading","endpoint","objId","noDetails","data","__WEBPACK_IMPORTED_MODULE_2_react_redux__","_state","ownProps","replace","creating","types","perm","split","perms","permissions","mapStateToProps","requestList","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","details","endEdit","delete","createTable","__WEBPACK_IMPORTED_MODULE_6__DataTable__","componentDidMount","static","interval","setInterval","componentWillUnmount","clearInterval","checks","regsValid","expandRef","val","func_1","createFields","filterFields","ff","find","filterName","dataVal","filterValue","indexOf","RegExp","test","every","check","cols","origActions","DT","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_8__Util__","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","createButton","onCreate","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","newObj","CreateForm","canCreate","createName","fieldGroups","newField","isGroup","only","second","first","fg","renderField","Group","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","multiple","deselectCurrent","__webpack_require__","defaultMessage","module","exports","text","debug","message","reselectPrevious","range","mark","success","document","createRange","getSelection","createElement","textContent","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","body","appendChild","selectNode","addRange","execCommand","Error","err","warn","window","clipboardData","setData","copyKey","navigator","userAgent","format","prompt","removeRange","removeAllRanges","removeChild","rangeCount","activeElement","ranges","getRangeAt","tagName","toUpperCase","blur","focus"],"mappings":"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","file":"static/js/8.42bdbf08.chunk.js","sourcesContent":["import * as copy from \"copy-to-clipboard\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { connect, Dispatch } from \"react-redux\"\nimport { Button, Input, List } from \"semantic-ui-react\"\n\nimport { AppAction } from \"../../../actions\"\nimport { WebBooksBook } from \"../../../fetch\"\nimport { AppState, DataViewRef } from \"../../../types\"\n\nimport DataViewFunc from \"../../../components/DataView\"\nconst DataView = DataViewFunc(\"web-books/book\", \"id\")\n\ninterface Props extends reactI18Next.InjectedTranslateProps {\n\tapiUrl: string\n}\n\ninterface OwnState {\n\tlines: string[]\n\tnewItem: \"\"\n}\n\nclass Books extends React.Component<Props, OwnState> {\n\n\tconstructor(props: Props) {\n\t\tsuper(props)\n\n\t\tthis.renderEditContent = this.renderEditContent.bind(this)\n\t}\n\n\taddLine(view: DataViewRef<WebBooksBook>) {\n\t\tview.setState({\n\t\t\tlines: view.state.lines.concat(view.state.newItem),\n\t\t\tnewItem: \"\",\n\t\t})\n\t}\n\n\tmoveLineUp(view: DataViewRef<WebBooksBook>, index: number) {\n\t\tview.setState({\n\t\t\tlines: view.state.lines.map((line: string, i: number) =>\n\t\t\t\ti === index ? view.state.lines[index - 1] :\n\t\t\t\t(i === index - 1 ? view.state.lines[index] : line)),\n\t\t})\n\t}\n\n\tmoveLineDown(view: DataViewRef<WebBooksBook>, index: number) {\n\t\tview.setState({\n\t\t\tlines: view.state.lines.map((line: string, i: number) =>\n\t\t\t\ti === index ? view.state.lines[index + 1] :\n\t\t\t\t(i === index + 1 ? view.state.lines[index] : line)),\n\t\t})\n\t}\n\n\tdeleteLine(view: DataViewRef<WebBooksBook>, index: number) {\n\t\tview.setState({\n\t\t\tlines: view.state.lines.filter((line: string, i: number) => i !== index),\n\t\t\tnewItem: \"\",\n\t\t})\n\t}\n\n\tcopy(book: WebBooksBook) {\n\t\tcopy(this.props.apiUrl + \"/api/v5/web-books/book/\" + book.id + \"/html\")\n\t}\n\n\trender() {\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<DataView\n\t\t\t\tcanEdit\n\t\t\t\tcanDelete\n\t\t\t\ticon=\"book\"\n\t\t\t\ttitle={_t(\"WebBooks\")}\n\t\t\t\tfilterTitle={_t(\"FilterBooks\")}\n\t\t\t\tcreateTitle={_t(\"CreateBook\")}\n\t\t\t\tfields={{\n\t\t\t\t\tid: {\n\t\t\t\t\t\tlabel: _t(\"Id\"),\n\t\t\t\t\t\tcreate: true,\n\t\t\t\t\t\tfilter: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\tlabel: _t(\"Title\"),\n\t\t\t\t\t\tedit: true,\n\t\t\t\t\t\tcreate: true,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\twide: true,\n\t\t\t\t\t},\n\t\t\t\t\tlines: {\n\t\t\t\t\t\tview: false,\n\t\t\t\t\t\tedit: true,\n\t\t\t\t\t},\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\tlabel: _t(\"Content\"),\n\t\t\t\t\t\twide: true,\n\t\t\t\t\t\tview: (book: WebBooksBook) => <div dangerouslySetInnerHTML={{ __html: book.html }} />,\n\t\t\t\t\t\tedit: this.renderEditContent,\n\t\t\t\t\t},\n\t\t\t\t\tlink: {\n\t\t\t\t\t\tlabel: _t(\"Link\"),\n\t\t\t\t\t\twide: true,\n\t\t\t\t\t\tview: (book: WebBooksBook) =>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tfluid\n\t\t\t\t\t\t\t\tonFocus={(e: React.SyntheticEvent<HTMLInputElement>) => (e.target as any).select()}\n\t\t\t\t\t\t\t\taction={{ color: \"teal\", icon: \"linkify\", onClick: () => this.copy(book) }}\n\t\t\t\t\t\t\t\tvalue={this.props.apiUrl + \"/api/v5/web-books/book/\" + book.id + \"/html\"}\n\t\t\t\t\t\t\t/>,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonSave={(obj: WebBooksBook, newData: any, view: DataViewRef<WebBooksBook>) => {\n\t\t\t\t\tview.save(obj, {\n\t\t\t\t\t\tid: obj.id,\n\t\t\t\t\t\ttitle: newData.title,\n\t\t\t\t\t\tlines: newData.lines,\n\t\t\t\t\t})\n\t\t\t\t}}\n\t\t\t/>\n\t\t)\n\t}\n\n\trenderEditContent(book: WebBooksBook, view: DataViewRef<WebBooksBook>) {\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<List size=\"large\">\n\t\t\t\t\t{view.state.lines.map((line: string, index: number) =>\n\t\t\t\t\t\t<List.Item key={index}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcompact\n\t\t\t\t\t\t\t\ticon=\"delete\"\n\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\tonClick={e => this.deleteLine(view, index)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{line}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcompact\n\t\t\t\t\t\t\t\ticon=\"arrow down\"\n\t\t\t\t\t\t\t\tcolor=\"blue\"\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\t\t\tonClick={e => this.moveLineDown(view, index)}\n\t\t\t\t\t\t\t\tdisabled={index >= view.state.lines.length - 1}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcompact\n\t\t\t\t\t\t\t\ticon=\"arrow up\"\n\t\t\t\t\t\t\t\tcolor=\"blue\"\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\t\t\tonClick={e => this.moveLineUp(view, index)}\n\t\t\t\t\t\t\t\tdisabled={index <= 0}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</List.Item>\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"newItem\"\n\t\t\t\t\tplaceholder={_t(\"NewLine\")}\n\t\t\t\t\tonChange={view.handleChange}\n\t\t\t\t\tvalue={view.state.newItem ? view.state.newItem : \"\"}\n\t\t\t\t\taction={{ color: \"green\", icon: \"plus\", onClick: () => this.addLine(view) }}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state: AppState) => {\n\treturn {\n\t\tapiUrl: state.api.server.apiUrl\n\t}\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\n\treturn {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n\ttranslate(\"Integrations.WebBooks\")(Books)\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Integrations/WebBooks/Books.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Header, Icon, SemanticICONS, Table } from \"semantic-ui-react\"\n\nimport { DataFieldRaw, DataTableRef, IdFunction } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nimport Pagination from \"./Pagination\"\nimport TableHeader from \"./TableHeader\"\nimport TableRow from \"./TableRow\"\n\nconst ITEMS_PER_PAGE = 20\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle?: string\n\ticon?: SemanticICONS\n\tlist: T[]\n\tcanEdit?: boolean\n\tcanDelete?: boolean\n\tfields: {\n\t\t[key: string]: DataFieldRaw<T>\n\t}\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\n\tonEdit?: (data: T | null, view: DataTableRef) => void\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\n\tonDelete?: (data: T, view: DataTableRef) => void\n\tidFunc: IdFunction<T>\n\tisEditing: (data: T) => boolean\n}\n\ninterface OwnState {\n\tpage: number\n\tnewData: any\n}\n\nclass DataTable<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.changePage = this.changePage.bind(this)\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tchangePage(event: React.MouseEvent<HTMLElement>, page: number) {\n\t\tevent.preventDefault()\n\n\t\tthis.setState({\n\t\t\tpage: page,\n\t\t})\n\t}\n\n\tonEdit(obj: T | null, view: DataTableRef): void {\n\t\tconst newData = {}\n\t\tif (obj) {\n\t\t\tObject.keys(this.props.fields).forEach(name => {\n\t\t\t\tif (!this.props.fields[name].edit) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tnewData[name] = _.get(obj, name)\n\t\t\t})\n\t\t}\n\n\t\tconsole.log(newData)\n\t\tthis.setState({\n\t\t\tnewData: newData,\n\t\t})\n\n\t\tif (this.props.onEdit) {\n\t\t\tthis.props.onEdit(obj, view)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.page !== this.state.page ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\trender() {\n\t\tconst { icon, title, list, canEdit, canDelete, actions } = this.props\n\t\tconst fields = Object.keys(this.props.fields).map(f => this.props.fields[f]).filter(f => f.view)\n\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE)\n\t\tconst page = Math.min(this.state.page, maxPage - 1)\n\n\t\tconst listPage = list.slice(page * ITEMS_PER_PAGE, (page + 1) * ITEMS_PER_PAGE)\n\n\t\tconst thisRef: DataTableRef = {\n\t\t\thandleChange: this.handleChange,\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: (changes: object) => this.setState({\n\t\t\t\tnewData: { ...this.state.newData, ...changes }\n\t\t\t}),\n\t\t}\n\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<div style={{ marginTop: \"2em\" }}>\n\t\t\t\t{title &&\n\t\t\t\t\t<Header>\n\t\t\t\t\t\t<Icon fitted name={icon} /> {title}\n\t\t\t\t\t</Header>\n\t\t\t\t}\n\n\t\t\t\t<Table striped={true} stackable>\n\t\t\t\t\t<TableHeader\n\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\thasActions={typeof actions !== \"undefined\"}\n\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\tt={_t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t{listPage.map((obj, i) =>\n\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\tkey={this.props.idFunc(obj)}\n\t\t\t\t\t\t\t\tobj={obj}\n\t\t\t\t\t\t\t\ttableRef={thisRef}\n\t\t\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\t\t\tediting={this.props.isEditing(obj)}\n\t\t\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\t\t\tonEdit={(d: T, v) => this.onEdit(d, v)}\n\t\t\t\t\t\t\t\tonSave={this.props.onSave}\n\t\t\t\t\t\t\t\tonDelete={this.props.onDelete}\n\t\t\t\t\t\t\t\tactions={this.props.actions}\n\t\t\t\t\t\t\t\tnewData={this.state.newData}\n\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\tt={_t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Pagination\n\t\t\t\t\tpage={page}\n\t\t\t\t\tmaxPage={maxPage}\n\t\t\t\t\tchangePage={(e, p) => this.changePage(e, p)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default translate(\"DataTable\")(DataTable)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from \"react\"\r\nimport { Menu } from \"semantic-ui-react\"\r\n\r\nexport interface Props {\r\n\tpage: number\r\n\tmaxPage: number\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn nextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst { page, maxPage } = this.props\r\n\t\tconst from = Math.max(0, page - 4)\r\n\t\tconst to = Math.min(maxPage, page + 5)\r\n\t\tconst pages = []\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{ page > 4 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, 0)}>\r\n\t\t\t\t\t\t1\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page > 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page - 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ pages.map(p => (\r\n\t\t\t\t\t<Menu.Item key={p} onClick={e => this.props.changePage(e, p)} active={p === page}>\r\n\t\t\t\t\t\t{p + 1}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t))}\r\n\t\t\t\t{ page < maxPage - 6 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page + 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page < maxPage - 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, maxPage - 1)}>\r\n\t\t\t\t\t\t{maxPage}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t</Menu>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from \"react\"\r\nimport { Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw } from \"../../types\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\thasActions: boolean\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{Object.keys(this.props.fields).map(name => {\r\n\t\t\t\t\t\tconst field = this.props.fields[name]\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t\t\t\t{field.label ? field.label : \"<\" + field.name + \">\"}\r\n\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{this.props.hasActions || this.props.canEdit || this.props.canDelete ?\r\n\t\t\t\t\t\t<Table.HeaderCell>{this.props.t(\"Actions\")}</Table.HeaderCell>\r\n\t\t\t\t\t: null}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from \"react\"\r\nimport { Button, Dropdown, Form, Icon, Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw, DataTableRef } from \"../../types\"\r\nimport { get, HandleChangeFunc } from \"../Util\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\tobj: T\r\n\ttableRef: DataTableRef\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tediting: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n\tonEdit: (data: T | null, view: DataTableRef) => void\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\r\n\tonDelete?: (data: T, view: DataTableRef) => void\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\r\n\thandleChange: HandleChangeFunc\r\n\tnewData: any\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t}\r\n\r\n\trenderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : \"text\"}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { actions, fields, obj, canEdit, canDelete, editing, tableRef } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{fields.map((field, j) =>\r\n\t\t\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t\t\t{field.edit && editing ?\r\n\t\t\t\t\t\t\t(typeof field.edit === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.edit(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tthis.renderEdit(obj, field)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t(typeof field.view === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.view(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tget(obj, field.name)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t)}\r\n\t\t\t\t{actions || canEdit || canDelete ?\r\n\t\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t\t{canEdit && editing ?\r\n\t\t\t\t\t\t\t[<Button\r\n\t\t\t\t\t\t\t\tkey=\"save\"\r\n\t\t\t\t\t\t\t\tcolor=\"green\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onSave) { this.props.onSave(obj, this.props.newData, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t(\"Save\")}\r\n\t\t\t\t\t\t\t</Button>,\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey=\"cancel\"\r\n\t\t\t\t\t\t\t\tcolor=\"yellow\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(null, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t(\"Cancel\")}\r\n\t\t\t\t\t\t\t</Button>]\r\n\t\t\t\t\t\t: canEdit ?\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(obj, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t(\"Edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t\t\t{canDelete &&\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onDelete) { this.props.onDelete(obj, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t(\"Remove\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{actions && actions(obj, tableRef)}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t: null}\r\n\t\t\t</Table.Row>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { connect } from \"react-redux\"\nimport { Dispatch } from \"redux\"\nimport { Grid, Segment } from \"semantic-ui-react\"\n\nimport { AppAction } from \"../../actions\"\nimport {\n\trequestChange, requestCreate, requestDelete, requestDetails, requestList,\n\tsetFilter\n} from \"../../actions/dataview\"\nimport { DataViewState } from \"../../reducers/dataview\"\nimport { AppState, DataFieldRaw, DataTableRef, DataViewRef, IdFunction } from \"../../types\"\nimport CreateForm from \"../CreateForm\"\nimport DataTable, { Props as DataTableProps } from \"../DataTable\"\nimport FilterForm from \"../FilterForm\"\nimport { checkPermissions } from \"../Util\"\n\nimport { DispatchProps, FullProps, OwnProps, OwnState, StateProps } from \"./types\"\n\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\n\n\tinterval: NodeJS.Timer\n\n\tconstructor(props: FullProps<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tdata: null,\n\t\t}\n\n\t\tthis.details = this.details.bind(this)\n\t\tthis.create = this.create.bind(this)\n\t\tthis.edit = this.edit.bind(this)\n\t\tthis.endEdit = this.endEdit.bind(this)\n\t\tthis.save = this.save.bind(this)\n\t\tthis.delete = this.delete.bind(this)\n\t}\n\n\tcreateTable() { return DataTable as React.ComponentClass<DataTableProps<T>> }\n\n\tcomponentDidMount() {\n\t\tif (!this.props.static) {\n\t\t\tthis.props.requestList()\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000)\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.interval) {\n\t\t\tclearInterval(this.interval)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: FullProps<T>, nextState: OwnState<T>) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.filter !== this.props.filter ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.data !== this.state.data\n\t}\n\n\t// Create a new data entry\n\tcreate(data: T) {\n\t\tthis.props.requestCreate(data)\n\t}\n\n\t// Get the details for a data entry\n\tdetails(data: T) {\n\t\tthis.props.requestDetails(data)\n\t}\n\n\t// Select a data entry for editing\n\tedit(data: T | null) {\n\t\tthis.setState({\n\t\t\tdata: data,\n\t\t})\n\t}\n\n\t// Save/Update an existing data entry\n\tsave(data: T, newData: any) {\n\t\tthis.props.requestChange(data, newData)\n\t\tthis.endEdit()\n\t}\n\n\t// End editing an entry\n\tendEdit() {\n\t\tthis.setState({\n\t\t\tdata: null,\n\t\t})\n\t}\n\n\t// Delete a data entry\n\tdelete(data: T) {\n\t\tthis.props.requestDelete(data)\n\t}\n\n\trender() {\n\t\tconst checks: ((val: T) => boolean)[] = []\n\t\tlet regsValid = false\n\n\t\t// Reference that we pass to our various functions\n\t\tconst expandRef = (tableRef: DataTableRef): DataViewRef<T> =>\n\t\t\t({\n\t\t\t\t...tableRef,\n\t\t\t\tcreate: this.create,\n\t\t\t\tdetails: this.details,\n\t\t\t\tsave: this.save,\n\t\t\t\tedit: this.edit,\n\t\t\t\tendEdit: this.endEdit,\n\t\t\t\tdelete: this.delete,\n\t\t\t})\n\n\t\t// Get all the fields of the table\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(this.props.fields, (value, name) => {\n\t\t\tlet val: DataFieldRaw<T> = {\n\t\t\t\tname: name,\n\t\t\t\tview: true\n\t\t\t}\n\n\t\t\t// If the column is a string use that as the label\n\t\t\t// If the column is a function, use that function to display the cell\n\t\t\t// else if the column provides a view function then use that to display the cell\n\t\t\tif (typeof value === \"string\") {\n\t\t\t\tval.label = value\n\t\t\t} else if (typeof value === \"function\") {\n\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => value(obj, expandRef(tableRef))\n\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\tval = { ...val, ...value }\n\t\t\t\tif (typeof value.view === \"function\") {\n\t\t\t\t\tconst func = value.view\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => func(obj, expandRef(tableRef))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn val\n\t\t})\n\n\t\t// Get all the fields for the create form\n\t\t// Get all the fields for the filter form\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tObject.keys(fields).forEach(f => {\n\t\t\tif (fields[f].create) { createFields[f] = fields[f] }\n\t\t\tif (fields[f].filter) { filterFields[f] = fields[f] }\n\t\t})\n\n\t\ttry {\n\t\t\tObject.keys(this.props.filter).forEach(name => {\n\t\t\t\tconst value = this.props.filter[name]\n\n\t\t\t\t// Get the filter field according to the filterName if specified,\n\t\t\t\t// otherwise just the name\n\t\t\t\tconst ff = Object.keys(filterFields).map(f => filterFields[f]).find(f => f.filterName === name)\n\t\t\t\t\t|| filterFields[name]\n\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name)\n\t\t\t\tif (typeof ff.filterValue === \"function\") {\n\t\t\t\t\tval = ff.filterValue\n\t\t\t\t}\n\n\t\t\t\t// If it is an array then we need to check if the value is in the array\n\t\t\t\t// Otherwise just use a normal regex check\n\t\t\t\tif (_.isArray(value)) {\n\t\t\t\t\tif (value.length === 0) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tchecks.push((dataVal: T) => {\n\t\t\t\t\t\tconst v = val(dataVal)\n\t\t\t\t\t\treturn value.indexOf(v) >= 0\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tchecks.push((dataVal: T) => (new RegExp(value, \"i\")).test(val(dataVal)))\n\t\t\t\t}\n\t\t\t})\n\t\t\tregsValid = true\n\t\t} catch {\n\t\t\tregsValid = false\n\t\t}\n\n\t\t// Filter out the values according to the filters\n\t\t// If the regex isn't valid then we don't want to filter\n\t\tconst list = this.props.list.filter(data => {\n\t\t\treturn !regsValid || checks.every(check => check(data))\n\t\t})\n\n\t\t// Check how many columns we need for the create and filter form\n\t\tconst cols = this.props.createTitle && this.props.filterTitle ? 2 : 1\n\n\t\t// Wrap the provided actions if we have any\n\t\tconst origActions = this.props.actions\n\t\tlet actions = origActions\n\t\tif (typeof origActions === \"function\") {\n\t\t\tactions = (obj, tableRef) => origActions(obj, expandRef(tableRef))\n\t\t}\n\n\t\tconst DT = this.createTable()\n\n\t\treturn (\n\t\t\t<Segment basic>\n\n\t\t\t\t<Grid stackable doubling columns={cols}>\n\t\t\t\t\t{this.props.createTitle &&\n\t\t\t\t\t\tcheckPermissions(this.props.perms, this.props.perm.concat(\"create\")) &&\n\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<CreateForm\n\t\t\t\t\t\t\t\ttitle={this.props.createTitle}\n\t\t\t\t\t\t\t\tbutton={this.props.createButton}\n\t\t\t\t\t\t\t\tcreating={this.props.creating}\n\t\t\t\t\t\t\t\tfields={createFields}\n\t\t\t\t\t\t\t\tonCreate={(obj: any, tableRef: DataTableRef) =>\n\t\t\t\t\t\t\t\t\tthis.props.onCreate ?\n\t\t\t\t\t\t\t\t\t\tthis.props.onCreate(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tthis.create(obj)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\n\t\t\t\t\t{this.props.filterTitle &&\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<FilterForm\n\t\t\t\t\t\t\t\ttitle={this.props.filterTitle}\n\t\t\t\t\t\t\t\tfields={filterFields}\n\t\t\t\t\t\t\t\tvalid={regsValid}\n\t\t\t\t\t\t\t\tvalues={this.props.filter}\n\t\t\t\t\t\t\t\tonFilterChange={this.props.setFilter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\t\t\t\t</Grid>\n\n\t\t\t\t<DT\n\t\t\t\t\ttitle={this.props.title}\n\t\t\t\t\ticon={this.props.icon}\n\t\t\t\t\tlist={list}\n\t\t\t\t\tt={this.props.t}\n\t\t\t\t\tidFunc={this.props.idFunc}\n\t\t\t\t\tfields={fields}\n\t\t\t\t\tonEdit={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onEdit ?\n\t\t\t\t\t\t\tthis.props.onEdit(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.edit(obj)\n\t\t\t\t\t}\n\t\t\t\t\tonSave={(obj, newObj, tableRef) =>\n\t\t\t\t\t\tthis.props.onSave ?\n\t\t\t\t\t\t\tthis.props.onSave(obj, newObj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.save(obj, newObj)\n\t\t\t\t\t}\n\t\t\t\t\tonDelete={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onDelete ?\n\t\t\t\t\t\t\tthis.props.onDelete(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.delete(obj)\n\t\t\t\t\t}\n\t\t\t\t\tcanEdit={this.props.canEdit && checkPermissions(this.props.perms, this.props.perm.concat(\"change\"))}\n\t\t\t\t\tcanDelete={this.props.canDelete && checkPermissions(this.props.perms, this.props.perm.concat(\"delete\"))}\n\t\t\t\t\tactions={actions}\n\t\t\t\t\tisEditing={obj => this.props.equals(obj, this.state.data)}\n\t\t\t\t/>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\n\t\tconst state: DataViewState<T> = _.get(_state, endpoint.replace(/\\//g, \"_\").replace(\"-\", \"\"))\n\n\t\treturn {\n\t\t\tcreating: state ? state.creating : false,\n\t\t\tfilter: state && state.filter ? state.filter : {},\n\t\t\tlist: state ? state.list : [],\n\t\t\ttypes: _state.api.types,\n\t\t\tidFunc: id,\n\t\t\tperm: endpoint.split(\"/\"),\n\t\t\tperms: _state.api.permissions,\n\t\t}\n\t}\n}\n\nfunction mapDispatchToProps<T>(endpoint: string, id: IdFunction<T>, noDetails: boolean) {\n\treturn (dispatch: Dispatch<AppAction>) => {\n\t\treturn {\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\n\t\t\trequestChange: (data: T, newData: object) => dispatch(requestChange(endpoint, id, data, newData)),\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\n\t\t\tsetFilter: (filter: string, value: string) => dispatch(setFilter(endpoint, filter, value)),\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2),\n\t\t}\n\t}\n}\n\nexport default function createDataView<T>(endpoint: string, objId: string | IdFunction<T>, noDetails?: boolean) {\n\tif (!objId) {\n\t\tobjId = \"id\"\n\t}\n\tconst id = typeof objId === \"function\" ? objId : (data: T) => _.get(data, objId as string)\n\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\n\t\tmapStateToProps<T>(endpoint, id),\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\n\t)(DataView)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Button, Dropdown, Form, Header, Icon, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle: string\n\tcreating: boolean\n\tonCreate: (data: any, view: DataTableRef) => void\n\tbutton?: string\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n}\n\ninterface OwnState {\n\tnewData: any\n}\n\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t\tthis.create = this.create.bind(this)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\tcreate() {\n\t\tconst data = {}\n\t\tObject.keys(this.state.newData).forEach(key => {\n\t\t\t_.set(data, key, this.state.newData[key])\n\t\t})\n\n\t\tthis.props.onCreate(data, {\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: this.setState,\n\t\t\thandleChange: this.handleChange,\n\t\t})\n\t}\n\n\tcanCreate(): boolean {\n\t\treturn Object.keys(this.props.fields).every(name => {\n\t\t\tconst field = this.props.fields[name]\n\t\t\tconst key = field.createName ? field.createName : name\n\t\t\treturn typeof field === \"string\" || !field.required || this.state.newData[key]\n\t\t})\n\t}\n\n\trender() {\n\t\tconst { title, creating, fields } = this.props\n\n\t\tconst _t = this.props.t\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.createName ? field.createName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form loading={creating}>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn <div key={i}>\n\t\t\t\t\t\t\t\t{this.renderField(fg.only)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\n\t\t\t\t\t<Button color=\"green\" onClick={this.create} disabled={!this.canCreate()}>\n\t\t\t\t\t\t{this.props.button || _t(\"Create\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>) {\n\t\tconst state = this.state.newData\n\n\t\tif (typeof field.create === \"function\") {\n\t\t\treturn field.create({\n\t\t\t\tstate: state,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: state[field.name],\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid={true}\n\t\t\t\t\tselection={true}\n\t\t\t\t\tsearch={true}\n\t\t\t\t\trequired={field.required}\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tvalue={state[field.name]}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\trequired={field.required}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tname={field.name}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tvalue={state[field.name]}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default translate(\"CreateForm\")(CreateForm)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { Dropdown, Form, Header, Icon, Message, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> {\n\ttitle: string\n\tvalid: boolean\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n\tvalues: {\n\t\t[x: string]: string | string[]\n\t}\n\tonFilterChange: (key: string, value: string) => void\n}\n\nclass FilterForm<T> extends React.Component<Props<T>> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange)\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\n\t\treturn nextProps.values !== this.props.values ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.valid !== this.props.valid\n\t}\n\n\trender() {\n\t\tconst { title, fields, values, valid } = this.props\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.filterName ? field.filterName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first, _.get(values, fg.first.name), !valid)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second, _.get(values, fg.second.name), !valid)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\t\t\t\t\t<Message\n\t\t\t\t\t\terror\n\t\t\t\t\t\tvisible={!valid}\n\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\n\t\t\t\t\t/>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>, value: string | string[], error: boolean) {\n\t\tif (typeof field.filter === \"function\") {\n\t\t\treturn field.filter({\n\t\t\t\tstate: this.props.values,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: value,\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = []\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid\n\t\t\t\t\tselection\n\t\t\t\t\tsearch\n\t\t\t\t\tmultiple\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\terror={error}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\tname={field.name}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tvalue={value}\n\t\t\t\terror={error}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default FilterForm\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx","'use strict';\n\nvar deselectCurrent = require('toggle-selection');\n\nvar defaultMessage = 'Copy to clipboard: #{key}, Enter';\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? '⌘' : 'Ctrl') + '+C';\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug, message, reselectPrevious, range, selection, mark, success = false;\n  if (!options) { options = {}; }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement('span');\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = 'unset';\n    // prevents scrolling to the end of the page\n    mark.style.position = 'fixed';\n    mark.style.top = 0;\n    mark.style.clip = 'rect(0, 0, 0, 0)';\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = 'pre';\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = 'text';\n    mark.style.MozUserSelect = 'text';\n    mark.style.msUserSelect = 'text';\n    mark.style.userSelect = 'text';\n\n    document.body.appendChild(mark);\n\n    range.selectNode(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand('copy');\n    if (!successful) {\n      throw new Error('copy command was unsuccessful');\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error('unable to copy using execCommand: ', err);\n    debug && console.warn('trying IE specific stuff');\n    try {\n      window.clipboardData.setData('text', text);\n      success = true;\n    } catch (err) {\n      debug && console.error('unable to copy using clipboardData: ', err);\n      debug && console.error('falling back to prompt');\n      message = format('message' in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == 'function') {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/copy-to-clipboard/index.js\n// module id = 1221\n// module chunks = 8","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/toggle-selection/index.js\n// module id = 1222\n// module chunks = 8"],"sourceRoot":""}