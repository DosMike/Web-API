{"version":3,"sources":["views/Players/index.tsx","components/DataTable/index.tsx","components/DataTable/Pagination.tsx","components/DataTable/TableHeader.tsx","components/DataTable/TableRow.tsx","components/DataView/index.tsx","components/CreateForm/index.tsx","components/FilterForm/index.tsx","components/ItemStack/index.tsx","components/Inventory/index.tsx"],"names":["DataView","Object","__WEBPACK_IMPORTED_MODULE_8__components_DataView__","Players","_super","props","_this","call","this","state","modal","toggleModal","bind","showInventory","__extends","prototype","componentDidMount","requestWorlds","kick","player","requestKickPlayer","ban","requestBanPlayer","view","details","setState","inventory","render","_t","t","__WEBPACK_IMPORTED_MODULE_0_react__","icon","title","filterTitle","fields","name","label","filter","uuid","address","world","filterName","options","__WEBPACK_IMPORTED_MODULE_7__components_Util__","worlds","required","location","__WEBPACK_IMPORTED_MODULE_3_semantic_ui_react__","color","position","x","toFixed","y","z","health","wide","food","progress","style","marginBottom","percent","current","max","foodLevel","info","gameMode","experience","Detail","level","actions","loading","updating","disabled","onClick","open","onClose","Header","__WEBPACK_IMPORTED_MODULE_1_react_i18next__","i18nKey","Content","__WEBPACK_IMPORTED_MODULE_6__components_Inventory__","items","itemStacks","dontCollapse","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","list","dispatch","__WEBPACK_IMPORTED_MODULE_5__actions_player__","__WEBPACK_IMPORTED_MODULE_4__actions_dataview__","DataTable","page","newData","changePage","doHandleChange","handleChange","__WEBPACK_IMPORTED_MODULE_4__Util__","key","value","__assign","_a","event","preventDefault","onEdit","obj","keys","forEach","edit","__WEBPACK_IMPORTED_MODULE_0_lodash__","console","log","shouldComponentUpdate","nextProps","nextState","canEdit","canDelete","map","f","maxPage","Math","ceil","length","min","listPage","slice","thisRef","changes","__WEBPACK_IMPORTED_MODULE_1_react__","marginTop","fitted","striped","stackable","__WEBPACK_IMPORTED_MODULE_6__TableHeader__","hasActions","Body","i","__WEBPACK_IMPORTED_MODULE_7__TableRow__","idFunc","tableRef","editing","isEditing","d","v","onSave","onDelete","__WEBPACK_IMPORTED_MODULE_5__Pagination__","e","p","__WEBPACK_IMPORTED_MODULE_2_react_i18next__","Pagination","from","to","pages","push","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","pagination","Item","active","DataTableHeader","Row","field","HeaderCell","TableRow","renderEdit","col","Field","fluid","selection","search","control","placeholder","onChange","Input","type","j","Cell","collapsing","__WEBPACK_IMPORTED_MODULE_2__Util__","endpoint","objId","noDetails","id","data","_state","ownProps","replace","creating","types","api","perm","split","perms","permissions","mapStateToProps","requestList","requestDetails","requestCreate","requestChange","requestDelete","setFilter","equals","o1","o2","mapDispatchToProps","create","endEdit","save","delete","createTable","__WEBPACK_IMPORTED_MODULE_6__DataTable__","static","interval","setInterval","componentWillUnmount","clearInterval","checks","regsValid","expandRef","val","func_1","createFields","filterFields","ff","find","dataVal","filterValue","indexOf","RegExp","test","every","check","cols","createTitle","origActions","DT","basic","doubling","columns","__WEBPACK_IMPORTED_MODULE_8__Util__","concat","Column","__WEBPACK_IMPORTED_MODULE_5__CreateForm__","button","createButton","onCreate","__WEBPACK_IMPORTED_MODULE_7__FilterForm__","valid","values","onFilterChange","newObj","CreateForm","canCreate","createName","fieldGroups","newField","isGroup","only","second","first","fg","renderField","Group","widths","FilterForm","__WEBPACK_IMPORTED_MODULE_3__Util__","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","error","visible","content","multiple","itemStackStyle","display","verticalAlign","margin","padding","border","borderRadius","ItemStackComp","item","onRemove","compact","size","floated","durability","unbreakable","useLimit","quantity","enchantments","enchant","spawn","potionEffects","effect","num","amplifier","getAmplifier","foodRestoration","burningFuel","customizer","objValue","srcValue","Inventory","shown","stacked","toggle","dontStack","itemGroups","itemGroup","newItem","stackOption","checked","__WEBPACK_IMPORTED_MODULE_4__ItemStack__","Title","as","primary"],"mappings":"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","file":"static/js/6.b7c07be4.chunk.js","sourcesContent":["import * as React from \"react\"\nimport { Trans, translate } from \"react-i18next\"\nimport { connect, Dispatch } from \"react-redux\"\nimport { Button, Icon, Label, Modal, Progress } from \"semantic-ui-react\"\n\nimport { AppAction } from \"../../actions\"\nimport { ListRequestAction, requestList } from \"../../actions/dataview\"\nimport { BanPlayerRequestAction, KickPlayerRequestAction, requestBanPlayer,\n\trequestKickPlayer } from \"../../actions/player\"\nimport InventoryComp from \"../../components/Inventory\"\nimport { formatRange, renderWorldOptions } from \"../../components/Util\"\nimport { Inventory, Player, PlayerFull, WorldFull } from \"../../fetch\"\nimport { AppState, DataViewRef } from \"../../types\"\n\nimport DataViewFunc from \"../../components/DataView\"\nconst DataView = DataViewFunc(\"player\", \"uuid\")\n\ninterface Props extends reactI18Next.InjectedTranslateProps {\n\tworlds: WorldFull[]\n\trequestKickPlayer: (player: PlayerFull) => KickPlayerRequestAction\n\trequestBanPlayer: (player: PlayerFull) => BanPlayerRequestAction\n\trequestWorlds: () => ListRequestAction\n}\n\ninterface OwnState {\n\tmodal: boolean\n\tplayer?: PlayerFull\n\tinventory?: Inventory\n}\n\nclass Players extends React.Component<Props, OwnState> {\n\n\tconstructor(props: Props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tmodal: false,\n\t\t}\n\n\t\tthis.toggleModal = this.toggleModal.bind(this)\n\t\tthis.showInventory = this.showInventory.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.requestWorlds()\n\t}\n\n\tkick(player: PlayerFull) {\n\t\tthis.props.requestKickPlayer(player)\n\t}\n\n\tban(player: PlayerFull) {\n\t\tthis.props.requestBanPlayer(player)\n\t}\n\n\tshowInventory(player: PlayerFull, view: DataViewRef<PlayerFull>) {\n\t\tview.details(player)\n\n\t\tthis.setState({\n\t\t\tmodal: true,\n\t\t\tplayer: player,\n\t\t\tinventory: player.inventory,\n\t\t})\n\t}\n\n\ttoggleModal() {\n\t\tthis.setState({\n\t\t\tmodal: !this.state.modal,\n\t\t})\n\t}\n\n\trender() {\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<DataView\n\t\t\t\t\ticon=\"users\"\n\t\t\t\t\ttitle={_t(\"Players\")}\n\t\t\t\t\tfilterTitle={_t(\"FilterPlayers\")}\n\t\t\t\t\tfields={{\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\tlabel: _t(\"NameUUID\"),\n\t\t\t\t\t\t\tfilter: true,\n\t\t\t\t\t\t\tview: (player: PlayerFull) =>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{player.name}<br />\n\t\t\t\t\t\t\t\t\t{player.uuid}<br />\n\t\t\t\t\t\t\t\t\t{player.address}\n\t\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tworld: {\n\t\t\t\t\t\t\tlabel: _t(\"World\"),\n\t\t\t\t\t\t\tview: false,\n\t\t\t\t\t\t\tfilter: true,\n\t\t\t\t\t\t\tfilterName: \"location.world.uuid\",\n\t\t\t\t\t\t\toptions: renderWorldOptions(this.props.worlds),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\tlabel: _t(\"Location\"),\n\t\t\t\t\t\t\tview: (player: PlayerFull) =>\n\t\t\t\t\t\t\t\t<Button color=\"blue\">\n\t\t\t\t\t\t\t\t\t<Icon name=\"globe\" />\n\t\t\t\t\t\t\t\t\t{player.location.world.name}&nbsp; &nbsp;\n\t\t\t\t\t\t\t\t\t{player.location.position.x.toFixed(0)} |&nbsp;\n\t\t\t\t\t\t\t\t\t{player.location.position.y.toFixed(0)} |&nbsp;\n\t\t\t\t\t\t\t\t\t{player.location.position.z.toFixed(0)}\n\t\t\t\t\t\t\t\t</Button>,\n\t\t\t\t\t\t},\n\t\t\t\t\t\thealth: {\n\t\t\t\t\t\t\tlabel: _t(\"HealthFood\"),\n\t\t\t\t\t\t\twide: true,\n\t\t\t\t\t\t\tview: (player: PlayerFull) => {\n\t\t\t\t\t\t\t\tif (!player.health || ! player.food) {\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\t\t\t\t\tprogress\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{marginBottom: \"1em\"}}\n\t\t\t\t\t\t\t\t\t\t\tpercent={formatRange(player.health.current, player.health.max)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\t\t\t\t\tprogress\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t\t\t\tpercent={formatRange(player.food.foodLevel, 20)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinfo: {\n\t\t\t\t\t\t\tlabel: _t(\"Info\"),\n\t\t\t\t\t\t\twide: true,\n\t\t\t\t\t\t\tview: (player: PlayerFull) =>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{player.gameMode &&\n\t\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t\t{player.gameMode.name}\n\t\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t\t{player.experience &&\n\t\t\t\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\t\t\t\t{_t(\"Level\")}\n\t\t\t\t\t\t\t\t\t\t\t<Label.Detail>{player.experience.level}</Label.Detail>\n\t\t\t\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tactions={(player: PlayerFull, view: DataViewRef<PlayerFull>) =>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"blue\"\n\t\t\t\t\t\t\t\tloading={(player as any).updating}\n\t\t\t\t\t\t\t\tdisabled={(player as any).updating}\n\t\t\t\t\t\t\t\tonClick={() => this.showInventory(player, view)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{_t(\"Inventory\")}\n\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"yellow\"\n\t\t\t\t\t\t\t\tloading={(player as any).updating}\n\t\t\t\t\t\t\t\tdisabled={(player as any).updating}\n\t\t\t\t\t\t\t\tonClick={() => this.kick(player)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{_t(\"Kick\")}\n\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\tloading={(player as any).updating}\n\t\t\t\t\t\t\t\tdisabled={(player as any).updating}\n\t\t\t\t\t\t\t\tonClick={() => this.ban(player)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{_t(\"Ban\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t/>\n\n\t\t\t\t{this.state.player && this.state.inventory ?\n\t\t\t\t\t<Modal open={this.state.modal} onClose={this.toggleModal}>\n\t\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t\t<Trans i18nKey=\"InventoryTitle\">\n\t\t\t\t\t\t\t\t{this.state.player.name}'s Inventory\n\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t\t<Modal.Content>\n\t\t\t\t\t\t\t<InventoryComp\n\t\t\t\t\t\t\t\titems={this.state.inventory.itemStacks}\n\t\t\t\t\t\t\t\tdontCollapse={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Modal.Content>\n\t\t\t\t\t</Modal>\n\t\t\t\t: null}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (state: AppState) => {\n\treturn {\n\t\tworlds: state.world.list,\n\t}\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<AppAction>) => {\n\treturn {\n\t\trequestKickPlayer: (player: Player) => dispatch(requestKickPlayer(player)),\n\t\trequestBanPlayer: (player: Player) => dispatch(requestBanPlayer(player)),\n\t\trequestWorlds: () => dispatch(requestList(\"world\", true)),\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(translate(\"Players\")(Players))\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/Players/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Header, Icon, SemanticICONS, Table } from \"semantic-ui-react\"\n\nimport { DataFieldRaw, DataTableRef, IdFunction } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nimport Pagination from \"./Pagination\"\nimport TableHeader from \"./TableHeader\"\nimport TableRow from \"./TableRow\"\n\nconst ITEMS_PER_PAGE = 20\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle?: string\n\ticon?: SemanticICONS\n\tlist: T[]\n\tcanEdit?: boolean\n\tcanDelete?: boolean\n\tfields: {\n\t\t[key: string]: DataFieldRaw<T>\n\t}\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\n\tonEdit?: (data: T | null, view: DataTableRef) => void\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\n\tonDelete?: (data: T, view: DataTableRef) => void\n\tidFunc: IdFunction<T>\n\tisEditing: (data: T) => boolean\n}\n\ninterface OwnState {\n\tpage: number\n\tnewData: any\n}\n\nclass DataTable<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.changePage = this.changePage.bind(this)\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tchangePage(event: React.MouseEvent<HTMLElement>, page: number) {\n\t\tevent.preventDefault()\n\n\t\tthis.setState({\n\t\t\tpage: page,\n\t\t})\n\t}\n\n\tonEdit(obj: T | null, view: DataTableRef): void {\n\t\tconst newData = {}\n\t\tif (obj) {\n\t\t\tObject.keys(this.props.fields).forEach(name => {\n\t\t\t\tif (!this.props.fields[name].edit) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tnewData[name] = _.get(obj, name)\n\t\t\t})\n\t\t}\n\n\t\tconsole.log(newData)\n\t\tthis.setState({\n\t\t\tnewData: newData,\n\t\t})\n\n\t\tif (this.props.onEdit) {\n\t\t\tthis.props.onEdit(obj, view)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.page !== this.state.page ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\trender() {\n\t\tconst { icon, title, list, canEdit, canDelete, actions } = this.props\n\t\tconst fields = Object.keys(this.props.fields).map(f => this.props.fields[f]).filter(f => f.view)\n\n\t\tconst maxPage = Math.ceil(list.length / ITEMS_PER_PAGE)\n\t\tconst page = Math.min(this.state.page, maxPage - 1)\n\n\t\tconst listPage = list.slice(page * ITEMS_PER_PAGE, (page + 1) * ITEMS_PER_PAGE)\n\n\t\tconst thisRef: DataTableRef = {\n\t\t\thandleChange: this.handleChange,\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: (changes: object) => this.setState({\n\t\t\t\tnewData: { ...this.state.newData, ...changes }\n\t\t\t}),\n\t\t}\n\n\t\tconst _t = this.props.t\n\n\t\treturn (\n\t\t\t<div style={{ marginTop: \"2em\" }}>\n\t\t\t\t{title &&\n\t\t\t\t\t<Header>\n\t\t\t\t\t\t<Icon fitted name={icon} /> {title}\n\t\t\t\t\t</Header>\n\t\t\t\t}\n\n\t\t\t\t<Table striped={true} stackable>\n\t\t\t\t\t<TableHeader\n\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\thasActions={typeof actions !== \"undefined\"}\n\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\tt={_t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t{listPage.map((obj, i) =>\n\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\tkey={this.props.idFunc(obj)}\n\t\t\t\t\t\t\t\tobj={obj}\n\t\t\t\t\t\t\t\ttableRef={thisRef}\n\t\t\t\t\t\t\t\tcanEdit={canEdit}\n\t\t\t\t\t\t\t\tcanDelete={canDelete}\n\t\t\t\t\t\t\t\tediting={this.props.isEditing(obj)}\n\t\t\t\t\t\t\t\tfields={fields}\n\t\t\t\t\t\t\t\tonEdit={(d: T, v) => this.onEdit(d, v)}\n\t\t\t\t\t\t\t\tonSave={this.props.onSave}\n\t\t\t\t\t\t\t\tonDelete={this.props.onDelete}\n\t\t\t\t\t\t\t\tactions={this.props.actions}\n\t\t\t\t\t\t\t\tnewData={this.state.newData}\n\t\t\t\t\t\t\t\thandleChange={this.handleChange}\n\t\t\t\t\t\t\t\tt={_t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Pagination\n\t\t\t\t\tpage={page}\n\t\t\t\t\tmaxPage={maxPage}\n\t\t\t\t\tchangePage={(e, p) => this.changePage(e, p)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default translate(\"DataTable\")(DataTable)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/index.tsx","import * as React from \"react\"\r\nimport { Menu } from \"semantic-ui-react\"\r\n\r\nexport interface Props {\r\n\tpage: number\r\n\tmaxPage: number\r\n\tchangePage: (event: React.MouseEvent<HTMLElement>, page: number) => void\r\n}\r\n\r\nexport default class Pagination extends React.Component<Props> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props, nextState: any) {\r\n\t\treturn nextProps.page !== this.props.page ||\r\n\t\t\tnextProps.maxPage !== this.props.maxPage\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.maxPage <= 1) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\tconst { page, maxPage } = this.props\r\n\t\tconst from = Math.max(0, page - 4)\r\n\t\tconst to = Math.min(maxPage, page + 5)\r\n\t\tconst pages = []\r\n\t\tfor (let i = from; i < to; i++) {\r\n\t\t\tpages.push(i)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Menu pagination>\r\n\t\t\t\t{ page > 4 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, 0)}>\r\n\t\t\t\t\t\t1\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page > 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page - 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ pages.map(p => (\r\n\t\t\t\t\t<Menu.Item key={p} onClick={e => this.props.changePage(e, p)} active={p === page}>\r\n\t\t\t\t\t\t{p + 1}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t))}\r\n\t\t\t\t{ page < maxPage - 6 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, page + 5)}>\r\n\t\t\t\t\t\t...\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t\t{ page < maxPage - 5 ?\r\n\t\t\t\t\t<Menu.Item onClick={e => this.props.changePage(e, maxPage - 1)}>\r\n\t\t\t\t\t\t{maxPage}\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t: null }\r\n\t\t\t</Menu>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/Pagination.tsx","import * as React from \"react\"\r\nimport { Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw } from \"../../types\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\thasActions: boolean\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n}\r\n\r\nexport default class DataTableHeader<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.fields !== this.props.fields\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Table.Header>\r\n\t\t\t\t<Table.Row>\r\n\t\t\t\t\t{Object.keys(this.props.fields).map(name => {\r\n\t\t\t\t\t\tconst field = this.props.fields[name]\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Table.HeaderCell key={name}>\r\n\t\t\t\t\t\t\t\t{field.label ? field.label : \"<\" + field.name + \">\"}\r\n\t\t\t\t\t\t\t</Table.HeaderCell>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{this.props.hasActions || this.props.canEdit || this.props.canDelete ?\r\n\t\t\t\t\t\t<Table.HeaderCell>{this.props.t(\"Actions\")}</Table.HeaderCell>\r\n\t\t\t\t\t: null}\r\n\t\t\t\t</Table.Row>\r\n\t\t\t</Table.Header>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableHeader.tsx","import * as React from \"react\"\r\nimport { Button, Dropdown, Form, Icon, Table } from \"semantic-ui-react\"\r\n\r\nimport { DataFieldRaw, DataTableRef } from \"../../types\"\r\nimport { get, HandleChangeFunc } from \"../Util\"\r\n\r\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\r\n\tobj: T\r\n\ttableRef: DataTableRef\r\n\tcanEdit?: boolean\r\n\tcanDelete?: boolean\r\n\tediting: boolean\r\n\tfields: DataFieldRaw<T>[]\r\n\tonEdit: (data: T | null, view: DataTableRef) => void\r\n\tonSave?: (data: T, newData: any, view: DataTableRef) => void\r\n\tonDelete?: (data: T, view: DataTableRef) => void\r\n\tactions?: (data: T, view: DataTableRef) => JSX.Element\r\n\thandleChange: HandleChangeFunc\r\n\tnewData: any\r\n}\r\n\r\nexport default class TableRow<T> extends React.Component<Props<T>> {\r\n\r\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\r\n\t\treturn nextProps.obj !== this.props.obj ||\r\n\t\t\tnextProps.editing !== this.props.editing ||\r\n\t\t\tnextProps.fields !== this.props.fields ||\r\n\t\t\t(this.props.editing && nextProps.newData !== this.props.newData)\r\n\t}\r\n\r\n\trenderEdit(obj: T, col: DataFieldRaw<T>) {\r\n\t\tif (col.options) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Field\r\n\t\t\t\t\tfluid\r\n\t\t\t\t\tselection\r\n\t\t\t\t\tsearch\r\n\t\t\t\t\tcontrol={Dropdown}\r\n\t\t\t\t\tname={col.name}\r\n\t\t\t\t\tplaceholder={col.label}\r\n\t\t\t\t\toptions={col.options}\r\n\t\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Form.Input\r\n\t\t\t\tname={col.name}\r\n\t\t\t\ttype={col.type ? col.type : \"text\"}\r\n\t\t\t\tplaceholder={col.label}\r\n\t\t\t\tvalue={this.props.newData[col.name]}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { actions, fields, obj, canEdit, canDelete, editing, tableRef } = this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Table.Row>\r\n\t\t\t\t{fields.map((field, j) =>\r\n\t\t\t\t\t<Table.Cell key={j} collapsing={!field.wide}>\r\n\t\t\t\t\t\t{field.edit && editing ?\r\n\t\t\t\t\t\t\t(typeof field.edit === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.edit(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tthis.renderEdit(obj, field)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t(typeof field.view === \"function\" ?\r\n\t\t\t\t\t\t\t\tfield.view(obj, tableRef)\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\tget(obj, field.name)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t)}\r\n\t\t\t\t{actions || canEdit || canDelete ?\r\n\t\t\t\t\t<Table.Cell collapsing>\r\n\t\t\t\t\t\t{canEdit && editing ?\r\n\t\t\t\t\t\t\t[<Button\r\n\t\t\t\t\t\t\t\tkey=\"save\"\r\n\t\t\t\t\t\t\t\tcolor=\"green\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onSave) { this.props.onSave(obj, this.props.newData, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"save\" /> {this.props.t(\"Save\")}\r\n\t\t\t\t\t\t\t</Button>,\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey=\"cancel\"\r\n\t\t\t\t\t\t\t\tcolor=\"yellow\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(null, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"cancel\" /> {this.props.t(\"Cancel\")}\r\n\t\t\t\t\t\t\t</Button>]\r\n\t\t\t\t\t\t: canEdit ?\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => this.props.onEdit(obj, tableRef)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"edit\" /> {this.props.t(\"Edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t\t\t{canDelete &&\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\tdisabled={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tloading={(obj as any).updating}\r\n\t\t\t\t\t\t\t\tonClick={() => { if (this.props.onDelete) { this.props.onDelete(obj, tableRef) }}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon name=\"trash\" /> {this.props.t(\"Remove\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{actions && actions(obj, tableRef)}\r\n\t\t\t\t\t</Table.Cell>\r\n\t\t\t\t: null}\r\n\t\t\t</Table.Row>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataTable/TableRow.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { connect } from \"react-redux\"\nimport { Dispatch } from \"redux\"\nimport { Grid, Segment } from \"semantic-ui-react\"\n\nimport { AppAction } from \"../../actions\"\nimport {\n\trequestChange, requestCreate, requestDelete, requestDetails, requestList,\n\tsetFilter\n} from \"../../actions/dataview\"\nimport { DataViewState } from \"../../reducers/dataview\"\nimport { AppState, DataFieldRaw, DataTableRef, DataViewRef, IdFunction } from \"../../types\"\nimport CreateForm from \"../CreateForm\"\nimport DataTable, { Props as DataTableProps } from \"../DataTable\"\nimport FilterForm from \"../FilterForm\"\nimport { checkPermissions } from \"../Util\"\n\nimport { DispatchProps, FullProps, OwnProps, OwnState, StateProps } from \"./types\"\n\nclass DataView<T> extends React.Component<FullProps<T>, OwnState<T>> {\n\n\tinterval: NodeJS.Timer\n\n\tconstructor(props: FullProps<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tpage: 0,\n\t\t\tdata: null,\n\t\t}\n\n\t\tthis.details = this.details.bind(this)\n\t\tthis.create = this.create.bind(this)\n\t\tthis.edit = this.edit.bind(this)\n\t\tthis.endEdit = this.endEdit.bind(this)\n\t\tthis.save = this.save.bind(this)\n\t\tthis.delete = this.delete.bind(this)\n\t}\n\n\tcreateTable() { return DataTable as React.ComponentClass<DataTableProps<T>> }\n\n\tcomponentDidMount() {\n\t\tif (!this.props.static) {\n\t\t\tthis.props.requestList()\n\t\t\tthis.interval = setInterval(this.props.requestList, 10000)\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.interval) {\n\t\t\tclearInterval(this.interval)\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: FullProps<T>, nextState: OwnState<T>) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.filter !== this.props.filter ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.list !== this.props.list ||\n\t\t\tnextState.data !== this.state.data\n\t}\n\n\t// Create a new data entry\n\tcreate(data: T) {\n\t\tthis.props.requestCreate(data)\n\t}\n\n\t// Get the details for a data entry\n\tdetails(data: T) {\n\t\tthis.props.requestDetails(data)\n\t}\n\n\t// Select a data entry for editing\n\tedit(data: T | null) {\n\t\tthis.setState({\n\t\t\tdata: data,\n\t\t})\n\t}\n\n\t// Save/Update an existing data entry\n\tsave(data: T, newData: any) {\n\t\tthis.props.requestChange(data, newData)\n\t\tthis.endEdit()\n\t}\n\n\t// End editing an entry\n\tendEdit() {\n\t\tthis.setState({\n\t\t\tdata: null,\n\t\t})\n\t}\n\n\t// Delete a data entry\n\tdelete(data: T) {\n\t\tthis.props.requestDelete(data)\n\t}\n\n\trender() {\n\t\tconst checks: ((val: T) => boolean)[] = []\n\t\tlet regsValid = false\n\n\t\t// Reference that we pass to our various functions\n\t\tconst expandRef = (tableRef: DataTableRef): DataViewRef<T> =>\n\t\t\t({\n\t\t\t\t...tableRef,\n\t\t\t\tcreate: this.create,\n\t\t\t\tdetails: this.details,\n\t\t\t\tsave: this.save,\n\t\t\t\tedit: this.edit,\n\t\t\t\tendEdit: this.endEdit,\n\t\t\t\tdelete: this.delete,\n\t\t\t})\n\n\t\t// Get all the fields of the table\n\t\tconst fields: { [x: string]: DataFieldRaw<T> } = _.mapValues(this.props.fields, (value, name) => {\n\t\t\tlet val: DataFieldRaw<T> = {\n\t\t\t\tname: name,\n\t\t\t\tview: true\n\t\t\t}\n\n\t\t\t// If the column is a string use that as the label\n\t\t\t// If the column is a function, use that function to display the cell\n\t\t\t// else if the column provides a view function then use that to display the cell\n\t\t\tif (typeof value === \"string\") {\n\t\t\t\tval.label = value\n\t\t\t} else if (typeof value === \"function\") {\n\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => value(obj, expandRef(tableRef))\n\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\tval = { ...val, ...value }\n\t\t\t\tif (typeof value.view === \"function\") {\n\t\t\t\t\tconst func = value.view\n\t\t\t\t\tval.view = (obj: T, tableRef: DataTableRef) => func(obj, expandRef(tableRef))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn val\n\t\t})\n\n\t\t// Get all the fields for the create form\n\t\t// Get all the fields for the filter form\n\t\tconst createFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tconst filterFields: { [x: string]: DataFieldRaw<T> } = {}\n\t\tObject.keys(fields).forEach(f => {\n\t\t\tif (fields[f].create) { createFields[f] = fields[f] }\n\t\t\tif (fields[f].filter) { filterFields[f] = fields[f] }\n\t\t})\n\n\t\ttry {\n\t\t\tObject.keys(this.props.filter).forEach(name => {\n\t\t\t\tconst value = this.props.filter[name]\n\n\t\t\t\t// Get the filter field according to the filterName if specified,\n\t\t\t\t// otherwise just the name\n\t\t\t\tconst ff = Object.keys(filterFields).map(f => filterFields[f]).find(f => f.filterName === name)\n\t\t\t\t\t|| filterFields[name]\n\n\t\t\t\t// If we have a filterValue function then use that as the value for the check\n\t\t\t\tlet val = (dataVal: T) => _.get(dataVal, name)\n\t\t\t\tif (typeof ff.filterValue === \"function\") {\n\t\t\t\t\tval = ff.filterValue\n\t\t\t\t}\n\n\t\t\t\t// If it is an array then we need to check if the value is in the array\n\t\t\t\t// Otherwise just use a normal regex check\n\t\t\t\tif (_.isArray(value)) {\n\t\t\t\t\tif (value.length === 0) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tchecks.push((dataVal: T) => {\n\t\t\t\t\t\tconst v = val(dataVal)\n\t\t\t\t\t\treturn value.indexOf(v) >= 0\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tchecks.push((dataVal: T) => (new RegExp(value, \"i\")).test(val(dataVal)))\n\t\t\t\t}\n\t\t\t})\n\t\t\tregsValid = true\n\t\t} catch {\n\t\t\tregsValid = false\n\t\t}\n\n\t\t// Filter out the values according to the filters\n\t\t// If the regex isn't valid then we don't want to filter\n\t\tconst list = this.props.list.filter(data => {\n\t\t\treturn !regsValid || checks.every(check => check(data))\n\t\t})\n\n\t\t// Check how many columns we need for the create and filter form\n\t\tconst cols = this.props.createTitle && this.props.filterTitle ? 2 : 1\n\n\t\t// Wrap the provided actions if we have any\n\t\tconst origActions = this.props.actions\n\t\tlet actions = origActions\n\t\tif (typeof origActions === \"function\") {\n\t\t\tactions = (obj, tableRef) => origActions(obj, expandRef(tableRef))\n\t\t}\n\n\t\tconst DT = this.createTable()\n\n\t\treturn (\n\t\t\t<Segment basic>\n\n\t\t\t\t<Grid stackable doubling columns={cols}>\n\t\t\t\t\t{this.props.createTitle &&\n\t\t\t\t\t\tcheckPermissions(this.props.perms, this.props.perm.concat(\"create\")) &&\n\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<CreateForm\n\t\t\t\t\t\t\t\ttitle={this.props.createTitle}\n\t\t\t\t\t\t\t\tbutton={this.props.createButton}\n\t\t\t\t\t\t\t\tcreating={this.props.creating}\n\t\t\t\t\t\t\t\tfields={createFields}\n\t\t\t\t\t\t\t\tonCreate={(obj: any, tableRef: DataTableRef) =>\n\t\t\t\t\t\t\t\t\tthis.props.onCreate ?\n\t\t\t\t\t\t\t\t\t\tthis.props.onCreate(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tthis.create(obj)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\n\t\t\t\t\t{this.props.filterTitle &&\n\t\t\t\t\t\t<Grid.Column>\n\t\t\t\t\t\t\t<FilterForm\n\t\t\t\t\t\t\t\ttitle={this.props.filterTitle}\n\t\t\t\t\t\t\t\tfields={filterFields}\n\t\t\t\t\t\t\t\tvalid={regsValid}\n\t\t\t\t\t\t\t\tvalues={this.props.filter}\n\t\t\t\t\t\t\t\tonFilterChange={this.props.setFilter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t}\n\t\t\t\t</Grid>\n\n\t\t\t\t<DT\n\t\t\t\t\ttitle={this.props.title}\n\t\t\t\t\ticon={this.props.icon}\n\t\t\t\t\tlist={list}\n\t\t\t\t\tt={this.props.t}\n\t\t\t\t\tidFunc={this.props.idFunc}\n\t\t\t\t\tfields={fields}\n\t\t\t\t\tonEdit={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onEdit ?\n\t\t\t\t\t\t\tthis.props.onEdit(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.edit(obj)\n\t\t\t\t\t}\n\t\t\t\t\tonSave={(obj, newObj, tableRef) =>\n\t\t\t\t\t\tthis.props.onSave ?\n\t\t\t\t\t\t\tthis.props.onSave(obj, newObj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.save(obj, newObj)\n\t\t\t\t\t}\n\t\t\t\t\tonDelete={(obj, tableRef) =>\n\t\t\t\t\t\tthis.props.onDelete ?\n\t\t\t\t\t\t\tthis.props.onDelete(obj, expandRef(tableRef))\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tthis.delete(obj)\n\t\t\t\t\t}\n\t\t\t\t\tcanEdit={this.props.canEdit && checkPermissions(this.props.perms, this.props.perm.concat(\"change\"))}\n\t\t\t\t\tcanDelete={this.props.canDelete && checkPermissions(this.props.perms, this.props.perm.concat(\"delete\"))}\n\t\t\t\t\tactions={actions}\n\t\t\t\t\tisEditing={obj => this.props.equals(obj, this.state.data)}\n\t\t\t\t/>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nfunction mapStateToProps<T>(endpoint: string, id: IdFunction<T>) {\n\treturn (_state: AppState, ownProps: OwnProps<T>) => {\n\t\tconst state: DataViewState<T> = _.get(_state, endpoint.replace(/\\//g, \"_\").replace(\"-\", \"\"))\n\n\t\treturn {\n\t\t\tcreating: state ? state.creating : false,\n\t\t\tfilter: state && state.filter ? state.filter : {},\n\t\t\tlist: state ? state.list : [],\n\t\t\ttypes: _state.api.types,\n\t\t\tidFunc: id,\n\t\t\tperm: endpoint.split(\"/\"),\n\t\t\tperms: _state.api.permissions,\n\t\t}\n\t}\n}\n\nfunction mapDispatchToProps<T>(endpoint: string, id: IdFunction<T>, noDetails: boolean) {\n\treturn (dispatch: Dispatch<AppAction>) => {\n\t\treturn {\n\t\t\trequestList: () => dispatch(requestList(endpoint, !noDetails)),\n\t\t\trequestDetails: (data: T) => dispatch(requestDetails(endpoint, id, data)),\n\t\t\trequestCreate: (data: T) => dispatch(requestCreate(endpoint, id, data)),\n\t\t\trequestChange: (data: T, newData: object) => dispatch(requestChange(endpoint, id, data, newData)),\n\t\t\trequestDelete: (data: T) => dispatch(requestDelete(endpoint, id, data)),\n\t\t\tsetFilter: (filter: string, value: string) => dispatch(setFilter(endpoint, filter, value)),\n\t\t\tequals: (o1: T, o2: T) => o1 != null && o2 != null && id(o1) === id(o2),\n\t\t}\n\t}\n}\n\nexport default function createDataView<T>(endpoint: string, objId: string | IdFunction<T>, noDetails?: boolean) {\n\tif (!objId) {\n\t\tobjId = \"id\"\n\t}\n\tconst id = typeof objId === \"function\" ? objId : (data: T) => _.get(data, objId as string)\n\n\treturn connect<StateProps<T>, DispatchProps<T>, OwnProps<T>, AppState>(\n\t\tmapStateToProps<T>(endpoint, id),\n\t\tmapDispatchToProps<T>(endpoint, id, noDetails ? true : false)\n\t)(DataView)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/DataView/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Button, Dropdown, Form, Header, Icon, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw, DataTableRef } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> extends reactI18Next.InjectedTranslateProps {\n\ttitle: string\n\tcreating: boolean\n\tonCreate: (data: any, view: DataTableRef) => void\n\tbutton?: string\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n}\n\ninterface OwnState {\n\tnewData: any\n}\n\nclass CreateForm<T> extends React.Component<Props<T>, OwnState> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tnewData: {},\n\t\t}\n\n\t\tthis.doHandleChange = this.doHandleChange.bind(this)\n\t\tthis.handleChange = handleChange.bind(this, this.doHandleChange)\n\t\tthis.create = this.create.bind(this)\n\t}\n\n\tdoHandleChange(key: string, value: string) {\n\t\tthis.setState({\n\t\t\tnewData: {\n\t\t\t\t...this.state.newData,\n\t\t\t\t[key]: value\n\t\t\t}\n\t\t})\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: OwnState) {\n\t\treturn nextProps.creating !== this.props.creating ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextState.newData !== this.state.newData\n\t}\n\n\tcreate() {\n\t\tconst data = {}\n\t\tObject.keys(this.state.newData).forEach(key => {\n\t\t\t_.set(data, key, this.state.newData[key])\n\t\t})\n\n\t\tthis.props.onCreate(data, {\n\t\t\tstate: this.state.newData,\n\t\t\tsetState: this.setState,\n\t\t\thandleChange: this.handleChange,\n\t\t})\n\t}\n\n\tcanCreate(): boolean {\n\t\treturn Object.keys(this.props.fields).every(name => {\n\t\t\tconst field = this.props.fields[name]\n\t\t\tconst key = field.createName ? field.createName : name\n\t\t\treturn typeof field === \"string\" || !field.required || this.state.newData[key]\n\t\t})\n\t}\n\n\trender() {\n\t\tconst { title, creating, fields } = this.props\n\n\t\tconst _t = this.props.t\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.createName ? field.createName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon fitted name=\"plus\" /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form loading={creating}>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn <div key={i}>\n\t\t\t\t\t\t\t\t{this.renderField(fg.only)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\n\t\t\t\t\t<Button color=\"green\" onClick={this.create} disabled={!this.canCreate()}>\n\t\t\t\t\t\t{this.props.button || _t(\"Create\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>) {\n\t\tconst state = this.state.newData\n\n\t\tif (typeof field.create === \"function\") {\n\t\t\treturn field.create({\n\t\t\t\tstate: state,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: state[field.name],\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid={true}\n\t\t\t\t\tselection={true}\n\t\t\t\t\tsearch={true}\n\t\t\t\t\trequired={field.required}\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tvalue={state[field.name]}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\trequired={field.required}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tname={field.name}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tvalue={state[field.name]}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default translate(\"CreateForm\")(CreateForm)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CreateForm/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { Dropdown, Form, Header, Icon, Message, Segment } from \"semantic-ui-react\"\n\nimport { DataFieldGroup, DataFieldRaw } from \"../../types\"\nimport { handleChange, HandleChangeFunc } from \"../Util\"\n\nexport interface Props<T> {\n\ttitle: string\n\tvalid: boolean\n\tfields: {\n\t\t[x: string]: DataFieldRaw<T>\n\t}\n\tvalues: {\n\t\t[x: string]: string | string[]\n\t}\n\tonFilterChange: (key: string, value: string) => void\n}\n\nclass FilterForm<T> extends React.Component<Props<T>> {\n\n\thandleChange: HandleChangeFunc\n\n\tconstructor(props: Props<T>) {\n\t\tsuper(props)\n\n\t\tthis.handleChange = handleChange.bind(this, this.props.onFilterChange)\n\t}\n\n\tshouldComponentUpdate(nextProps: Props<T>, nextState: any) {\n\t\treturn nextProps.values !== this.props.values ||\n\t\t\tnextProps.fields !== this.props.fields ||\n\t\t\tnextProps.valid !== this.props.valid\n\t}\n\n\trender() {\n\t\tconst { title, fields, values, valid } = this.props\n\n\t\tconst fieldGroups: DataFieldGroup<T>[] = []\n\t\tObject.keys(fields).forEach(name => {\n\t\t\tconst field = fields[name]\n\t\t\tconst newField: DataFieldRaw<T> = {\n\t\t\t\t...field,\n\t\t\t\tname: field.filterName ? field.filterName : name,\n\t\t\t}\n\n\t\t\tif (newField.isGroup) {\n\t\t\t\tfieldGroups.push({ only: newField })\n\t\t\t} else if (fieldGroups.length && !fieldGroups[fieldGroups.length - 1].second) {\n\t\t\t\tfieldGroups[fieldGroups.length - 1].second = newField\n\t\t\t} else {\n\t\t\t\tfieldGroups.push({ first: newField })\n\t\t\t}\n\t\t})\n\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Header>\n\t\t\t\t\t<Icon name=\"filter\" fitted /> {title}\n\t\t\t\t</Header>\n\n\t\t\t\t<Form>\n\t\t\t\t\t{fieldGroups.map((fg, i) => {\n\t\t\t\t\t\tif (fg.only) {\n\t\t\t\t\t\t\treturn this.renderField(fg.only, _.get(values, fg.only.name), !valid)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn <Form.Group key={i} widths=\"equal\">\n\t\t\t\t\t\t\t{fg.first &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.first, _.get(values, fg.first.name), !valid)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{fg.second &&\n\t\t\t\t\t\t\t\tthis.renderField(fg.second, _.get(values, fg.second.name), !valid)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t})}\n\t\t\t\t\t<Message\n\t\t\t\t\t\terror\n\t\t\t\t\t\tvisible={!valid}\n\t\t\t\t\t\tcontent=\"Search term must be a valid regex\"\n\t\t\t\t\t/>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n\n\trenderField(field: DataFieldRaw<T>, value: string | string[], error: boolean) {\n\t\tif (typeof field.filter === \"function\") {\n\t\t\treturn field.filter({\n\t\t\t\tstate: this.props.values,\n\t\t\t\tsetState: this.setState,\n\t\t\t\thandleChange: this.handleChange,\n\t\t\t\tvalue: value,\n\t\t\t})\n\t\t}\n\n\t\tif (field.options) {\n\t\t\tif (!value) {\n\t\t\t\tvalue = []\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<Form.Field\n\t\t\t\t\tfluid\n\t\t\t\t\tselection\n\t\t\t\t\tsearch\n\t\t\t\t\tmultiple\n\t\t\t\t\tcontrol={Dropdown}\n\t\t\t\t\tname={field.name}\n\t\t\t\t\tlabel={field.label}\n\t\t\t\t\tplaceholder={field.label}\n\t\t\t\t\toptions={field.options}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\terror={error}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Form.Input\n\t\t\t\tname={field.name}\n\t\t\t\ttype={field.type ? field.type : \"text\"}\n\t\t\t\tlabel={field.label}\n\t\t\t\tplaceholder={field.label}\n\t\t\t\tvalue={value}\n\t\t\t\terror={error}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default FilterForm\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/FilterForm/index.tsx","import * as React from \"react\"\nimport { Button, ButtonProps, Label, Progress } from \"semantic-ui-react\"\n\nimport { ItemStack, PotionEffect } from \"../../fetch\"\nimport { formatRange } from \"../Util\"\n\nconst getRoman: (num: number) => string = (num: number) => {\n\tif (num === 1) { return \"I\" }\n\tif (num === 2) { return \"II\" }\n\tif (num === 3) { return \"III\" }\n\tif (num === 4) { return \"IV\" }\n\tif (num === 5) { return \"V\" }\n\treturn \"\"\n}\nconst getAmplifier: (effect: PotionEffect) => string = (effect: PotionEffect) => getRoman(effect.amplifier + 1)\n\nconst itemStackStyle = {\n\tdisplay: \"inline-block\",\n\tverticalAlign: \"top\",\n\tmargin: \"0.1em\",\n\tpadding: \"0.2em\",\n\tborder: \"1px solid rgba(34,36,38,.1)\",\n\tborderRadius: \".28571429rem\",\n}\n\nexport interface AppProps {\n\titem: ItemStack\n\tonRemove?: (event: React.MouseEvent<HTMLButtonElement>, data: ButtonProps) => void\n}\n\nclass ItemStackComp extends React.Component<AppProps> {\n\trender() {\n\t\tconst item: ItemStack = this.props.item\n\n\t\treturn (\n\t\t\t<div style={itemStackStyle}>\n\t\t\t\t<strong>{item.type.name}</strong>\n\t\t\t\t{this.props.onRemove &&\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcompact\n\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\ticon=\"delete\"\n\t\t\t\t\t\tfloated=\"right\"\n\t\t\t\t\t\tonClick={this.props.onRemove}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t<div style={{ color: \"gray\", marginBottom: \"0.5em\" }}>{item.type.id}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{item.durability &&\n\t\t\t\t\t\t\t(item.durability.unbreakable ?\n\t\t\t\t\t\t\t\t<Label size=\"tiny\">Unbreakable</Label>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Progress\n\t\t\t\t\t\t\t\t\tprogress\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tpercent={formatRange(item.durability.durability, item.useLimit ? item.useLimit : 0)}\n\t\t\t\t\t\t\t\t\tstyle={{ margin: \"0 0 .5em 0\" }}\n\t\t\t\t\t\t\t\t/>)}\n\t\t\t\t\t\t{item.quantity > 1 &&\n\t\t\t\t\t\t\t<Label size=\"tiny\" color=\"blue\">\n\t\t\t\t\t\t\t\tx{item.quantity}\n\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t{item.enchantments &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.enchantments.map(enchant =>\n\t\t\t\t\t\t\t\t\t<Label color=\"purple\" size=\"tiny\" key={enchant.id}>\n\t\t\t\t\t\t\t\t\t\t{enchant.name}\n\t\t\t\t\t\t\t\t\t\t<Label.Detail>{enchant.level}</Label.Detail>\n\t\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t{item.spawn &&\n\t\t\t\t\t\t\t<Label size=\"tiny\">\n\t\t\t\t\t\t\t\t{item.spawn.name}\n\t\t\t\t\t\t\t</Label>}\n\t\t\t\t\t\t{item.potionEffects &&\n\t\t\t\t\t\t\titem.potionEffects.map(effect =>\n\t\t\t\t\t\t\t\t<Label size=\"tiny\" color=\"brown\" key={effect.type.id}>\n\t\t\t\t\t\t\t\t\t{effect.type.name} {getAmplifier(effect)}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{item.foodRestoration &&\n\t\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\t\tsize=\"tiny\"\n\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\ticon=\"food\"\n\t\t\t\t\t\t\t\tcontent={item.foodRestoration}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t{item.burningFuel &&\n\t\t\t\t\t\t\t<Label\n\t\t\t\t\t\t\t\tsize=\"tiny\"\n\t\t\t\t\t\t\t\tcolor=\"red\"\n\t\t\t\t\t\t\t\ticon=\"fire\"\n\t\t\t\t\t\t\t\tcontent={item.burningFuel}\n\t\t\t\t\t\t\t/>}\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default ItemStackComp\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ItemStack/index.tsx","import * as _ from \"lodash\"\nimport * as React from \"react\"\nimport { translate } from \"react-i18next\"\nimport { Accordion, Button, Radio } from \"semantic-ui-react\"\n\nimport { ItemStack } from \"../../fetch\"\nimport ItemStackComp from \"../ItemStack\"\n\nconst customizer: (objValue: ItemStack, srcValue: ItemStack) => ItemStack[] | undefined =\n\t(objValue: ItemStack, srcValue: ItemStack) => {\n\t\tif (_.isArray(objValue)) {\n\t\t\treturn objValue.concat(srcValue)\n\t\t}\n\t\treturn undefined\n\t}\n\nexport interface AppProps extends reactI18Next.InjectedTranslateProps {\n\titems: ItemStack[]\n\tdontStack?: boolean\n\tstackOption?: boolean\n\tdontCollapse?: boolean\n}\n\ninterface AppState {\n\tshown: boolean\n\tstacked: boolean\n}\n\nclass Inventory extends React.Component<AppProps, AppState> {\n\tconstructor(props: AppProps) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tshown: false,\n\t\t\tstacked: true\n\t\t}\n\n\t\tthis.toggle = this.toggle.bind(this)\n\t}\n\n\ttoggle() {\n\t\tthis.setState({\n\t\t\tshown: !this.state.shown,\n\t\t})\n\t}\n\n\trender() {\n\t\tconst _t = this.props.t\n\n\t\tif (this.props.items.length === 0) {\n\t\t\treturn (\n\t\t\t\t<Button color=\"blue\" disabled>\n\t\t\t\t\t{_t(\"EmptyInventory\")}\n\t\t\t\t</Button>\n\t\t\t)\n\t\t}\n\n\t\tlet items = _.sortBy(this.props.items, \"type.name\")\n\t\tif (!this.props.dontStack && this.state.stacked) {\n\t\t\tconst itemGroups = _.groupBy(items, \"type.id\")\n\t\t\titems = _.map(itemGroups, itemGroup => {\n\t\t\t\tlet item = _.merge({}, _.first(itemGroup))\n\t\t\t\t_.tail(itemGroup).forEach(newItem => item = _.mergeWith(item, newItem, customizer))\n\t\t\t\treturn _.merge(item, { quantity: _.sumBy(itemGroup, \"quantity\") })\n\t\t\t})\n\t\t}\n\n\t\tconst content = (\n\t\t\t<div>\n\t\t\t\t{this.props.stackOption && [\n\t\t\t\t\t<Radio\n\t\t\t\t\t\ttoggle\n\t\t\t\t\t\tkey=\"radio\"\n\t\t\t\t\t\tchecked={this.state.stacked}\n\t\t\t\t\t\tonClick={() => this.setState({ stacked: !this.state.stacked })}\n\t\t\t\t\t/>,\n\t\t\t\t\t<br key=\"newline\" />\n\t\t\t\t]}\n\t\t\t\t{items.map((item, i) =>\n\t\t\t\t\t<ItemStackComp key={i} item={item} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)\n\n\t\tif (this.props.dontCollapse) {\n\t\t\treturn content\n\t\t}\n\n\t\treturn (\n\t\t\t<Accordion>\n\t\t\t\t<Accordion.Title as={Button} primary active={this.state.shown} onClick={this.toggle}>\n\t\t\t\t\t{this.state.shown ? _t(\"HideInventory\") : _t(\"ShowInventory\")}\n\t\t\t\t</Accordion.Title>\n\t\t\t\t<Accordion.Content active={this.state.shown}>\n\t\t\t\t\t{content}\n\t\t\t\t</Accordion.Content>\n\t\t\t</Accordion>\n\t\t)\n\t}\n}\n\nexport default translate(\"Inventory\")(Inventory)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Inventory/index.tsx"],"sourceRoot":""}